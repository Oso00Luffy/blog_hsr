(window.webpackJsonp=window.webpackJsonp||[]).push([[1105],{1296:function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return m})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return S})),n.d(e,"j",(function(){return v})),n.d(e,"k",(function(){return O})),n.d(e,"l",(function(){return x})),n.d(e,"m",(function(){return y}));var r=n(1616);function o(t,e){return Object(r.b)().captureException(t,{captureContext:e})}function c(t,e){const n="string"==typeof e?e:void 0,o="string"!=typeof e?{captureContext:e}:void 0;return Object(r.b)().captureMessage(t,n,o)}function h(t,e){return Object(r.b)().captureEvent(t,e)}function d(t){Object(r.b)().configureScope(t)}function _(t){Object(r.b)().addBreadcrumb(t)}function l(t,e){Object(r.b)().setContext(t,e)}function f(t){Object(r.b)().setExtras(t)}function m(t,e){Object(r.b)().setExtra(t,e)}function v(t){Object(r.b)().setTags(t)}function S(t,e){Object(r.b)().setTag(t,e)}function O(t){Object(r.b)().setUser(t)}function y(t){Object(r.b)().withScope(t)}function x(t,e){return Object(r.b)().startTransaction({...t},e)}},1397:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={};n.r(r),n.d(r,"FunctionToString",(function(){return o.a})),n.d(r,"InboundFilters",(function(){return c.a}));var o=n(2575),c=n(2576)},1616:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return S}));var r=n(3956),o=n(3911),c=n(2926),h=n(2244),d=n(3912),_=n(2047),l=n(2234);const f=100;class m{__init(){this._stack=[{}]}constructor(t,e=new _.a,n=4){this._version=n,m.prototype.__init.call(this),this.getStackTop().scope=e,t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=_.a.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(t){const e=this.pushScope();try{t(e)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,e){const n=this._lastEventId=e&&e.event_id?e.event_id:Object(r.f)(),o=new Error("Sentry syntheticException");return this._withClient(((r,c)=>{r.captureException(t,{originalException:t,syntheticException:o,...e,event_id:n},c)})),n}captureMessage(t,e,n){const o=this._lastEventId=n&&n.event_id?n.event_id:Object(r.f)(),c=new Error(t);return this._withClient(((r,h)=>{r.captureMessage(t,e,{originalException:t,syntheticException:c,...n,event_id:o},h)})),o}captureEvent(t,e){const n=e&&e.event_id?e.event_id:Object(r.f)();return"transaction"!==t.type&&(this._lastEventId=n),this._withClient(((r,o)=>{r.captureEvent(t,{...e,event_id:n},o)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(t,e){const{scope:n,client:r}=this.getStackTop();if(!n||!r)return;const{beforeBreadcrumb:h=null,maxBreadcrumbs:d=f}=r.getOptions&&r.getOptions()||{};if(d<=0)return;const _={timestamp:Object(o.b)(),...t},l=h?Object(c.b)((()=>h(_,e))):_;null!==l&&n.addBreadcrumb(l,d)}setUser(t){const e=this.getScope();e&&e.setUser(t)}setTags(t){const e=this.getScope();e&&e.setTags(t)}setExtras(t){const e=this.getScope();e&&e.setExtras(t)}setTag(t,e){const n=this.getScope();n&&n.setTag(t,e)}setExtra(t,e){const n=this.getScope();n&&n.setExtra(t,e)}setContext(t,e){const n=this.getScope();n&&n.setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();e&&n&&t(e)}run(t){const e=S(this);try{t(this)}finally{S(e)}}getIntegration(t){const e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(t){return null}}startTransaction(t,e){return this._callExtensionMethod("startTransaction",t,e)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop(),e=t&&t.scope,n=e&&e.getSession();n&&Object(l.a)(n),this._sendSessionUpdate(),e&&e.setSession()}startSession(t){const{scope:e,client:n}=this.getStackTop(),{release:r,environment:o}=n&&n.getOptions()||{},{userAgent:c}=h.a.navigator||{},d=Object(l.b)({release:r,environment:o,...e&&{user:e.getUser()},...c&&{userAgent:c},...t});if(e){const t=e.getSession&&e.getSession();t&&"ok"===t.status&&Object(l.c)(t,{status:"exited"}),this.endSession(),e.setSession(d)}return d}shouldSendDefaultPii(){const t=this.getClient(),e=t&&t.getOptions();return Boolean(e&&e.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:e}=this.getStackTop();if(!t)return;const n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}_withClient(t){const{scope:e,client:n}=this.getStackTop();n&&t(n,e)}_callExtensionMethod(t,...e){const n=v().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e)}}function v(){return h.a.__SENTRY__=h.a.__SENTRY__||{extensions:{},hub:void 0},h.a}function S(t){const e=v(),n=x(e);return j(e,t),n}function O(){const t=v();return y(t)&&!x(t).isOlderThan(4)||j(t,new m),Object(d.b)()?function(t){try{const e=v().__SENTRY__,n=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!n)return x(t);if(!y(n)||x(n).isOlderThan(4)){const e=x(t).getStackTop();j(n,new m(e.client,_.a.clone(e.scope)))}return x(n)}catch(e){return x(t)}}(t):x(t)}function y(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function x(t){return Object(h.c)("hub",(()=>new m),t)}function j(t,e){if(!t)return!1;return(t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0}},2047:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return m}));var r=n(2046),o=n(3911),c=n(3914),h=n(3956),d=n(2244),_=n(2234);class l{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(t){const e=new l;return t&&(e._breadcrumbs=[...t._breadcrumbs],e._tags={...t._tags},e._extra={...t._extra},e._contexts={...t._contexts},e._user=t._user,e._level=t._level,e._span=t._span,e._session=t._session,e._transactionName=t._transactionName,e._fingerprint=t._fingerprint,e._eventProcessors=[...t._eventProcessors],e._requestSession=t._requestSession,e._attachments=[...t._attachments],e._sdkProcessingMetadata={...t._sdkProcessingMetadata}),e}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&Object(_.c)(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,e){return this._tags={...this._tags,[t]:e},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,e){return this._extra={...this._extra,[t]:e},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSpan(span){return this._span=span,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const span=this.getSpan();return span&&span.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if("function"==typeof t){const e=t(this);return e instanceof l?e:this}return t instanceof l?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):Object(r.i)(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(t,e){const n="number"==typeof e?e:100;if(n<=0)return this;const r={timestamp:Object(o.b)(),...t};return this._breadcrumbs=[...this._breadcrumbs,r].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,e={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const e=this._span.transaction&&this._span.transaction.name;e&&(t.tags={transaction:e,...t.tags})}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...f(),...this._eventProcessors],t,e)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}_notifyEventProcessors(t,e,n,o=0){return new c.a(((c,h)=>{const d=t[o];if(null===e||"function"!=typeof d)c(e);else{const _=d({...e},n);Object(r.n)(_)?_.then((e=>this._notifyEventProcessors(t,e,n,o+1).then(c))).then(null,h):this._notifyEventProcessors(t,_,n,o+1).then(c).then(null,h)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?Object(h.c)(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function f(){return Object(d.c)("globalEventProcessors",(()=>[]))}function m(t){f().push(t)}},2234:function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d}));var r=n(3911),o=n(3956),c=n(2621);function h(t){const e=Object(r.c)(),n={sid:Object(o.f)(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return Object(c.c)({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&d(n,t),n}function d(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Object(r.c)(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:Object(o.f)()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function _(t,e){let n={};e?n={status:e}:"ok"===t.status&&(n={status:"exited"}),d(t,n)}},2575:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(2621);let o;class c{constructor(){c.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=c.id}setupOnce(){o=Function.prototype.toString,Function.prototype.toString=function(...t){const e=Object(r.f)(this)||this;return o.apply(e,t)}}}c.__initStatic()},2576:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(3195);const o=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class c{static __initStatic(){this.id="InboundFilters"}__init(){this.name=c.id}constructor(t={}){this._options=t,c.prototype.__init.call(this)}setupOnce(t,e){const n=t=>{const n=e();if(n){const e=n.getIntegration(c);if(e){const c=n.getClient(),d=c?c.getOptions():{},_=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...o],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(e._options,d);return function(t,e){if(e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return!0;if(function(t,e){if(!e||!e.length)return!1;return function(t){if(t.message)return[t.message];if(t.exception)try{const{type:e="",value:n=""}=t.exception.values&&t.exception.values[0]||{};return[`${n}`,`${e}: ${n}`]}catch(t){return[]}return[]}(t).some((t=>Object(r.c)(t,e)))}(t,e.ignoreErrors))return!0;if(function(t,e){if(!e||!e.length)return!1;const n=h(t);return!!n&&Object(r.c)(n,e)}(t,e.denyUrls))return!0;if(!function(t,e){if(!e||!e.length)return!0;const n=h(t);return!n||Object(r.c)(n,e)}(t,e.allowUrls))return!0;return!1}(t,_)?null:t}}return t};n.id=this.name,t(n)}}function h(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let i=t.length-1;i>=0;i--){const e=t[i];if(e&&"<anonymous>"!==e.filename&&"[native code]"!==e.filename)return e.filename||null}return null}(e):null}catch(t){return null}}c.__initStatic()},2622:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return d}));var r=n(2621),o=n(3917);function c(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function h(t,e={}){const n="string"==typeof e?e:e.tunnel,o="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${c(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){return Object(r.h)({sentry_key:t.publicKey,sentry_version:"7",...e&&{sentry_client:`${e.name}/${e.version}`}})}(t,o)}`}function d(t,e){const n=Object(o.b)(t),r=`${c(n)}embed/error-page/`;let h=`dsn=${Object(o.a)(n)}`;for(const t in e)if("dsn"!==t)if("user"===t){const t=e.user;if(!t)continue;t.name&&(h+=`&name=${encodeURIComponent(t.name)}`),t.email&&(h+=`&email=${encodeURIComponent(t.email)}`)}else h+=`&${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`;return`${r}?${h}`}},2927:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="7.28.1"},2928:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(3957),o=n(3915),c=n(3959),h=n(3914),d=n(3196);function _(t,e,n=Object(r.a)(t.bufferSize||30)){let _={};return{send:function(r){const f=[];if(Object(o.f)(r,((e,n)=>{const r=Object(o.e)(n);if(Object(c.a)(_,r)){const o=l(e,n);t.recordDroppedEvent("ratelimit_backoff",r,o)}else f.push(e)})),0===f.length)return Object(h.c)();const m=Object(o.c)(r[0],f),v=e=>{Object(o.f)(m,((n,r)=>{const c=l(n,r);t.recordDroppedEvent(e,Object(o.e)(r),c)}))};return n.add((()=>e({body:Object(o.h)(m,t.textEncoder)}).then((t=>{void 0!==t.statusCode&&(t.statusCode<200||t.statusCode),_=Object(c.b)(_,t)}),(t=>{v("network_error")})))).then((t=>t),(t=>{if(t instanceof d.a)return v("queue_overflow"),Object(h.c)();throw t}))},flush:t=>n.drain(t)}}function l(t,e){if("event"===e||"transaction"===e)return Array.isArray(t)?t[1]:void 0}},2931:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return _}));var r=n(3956),o=n(1616),c=n(2047);const h=[];function d(t){const e=t.defaultIntegrations||[],n=t.integrations;let o;e.forEach((t=>{t.isDefaultInstance=!0})),o=Array.isArray(n)?[...e,...n]:"function"==typeof n?Object(r.c)(n(e)):e;const c=function(t){const e={};return t.forEach((t=>{const{name:n}=t,r=e[n];r&&!r.isDefaultInstance&&t.isDefaultInstance||(e[n]=t)})),Object.values(e)}(o),h=c.findIndex((t=>"Debug"===t.name));if(-1!==h){const[t]=c.splice(h,1);c.push(t)}return c}function _(t){const e={};return t.forEach((t=>{e[t.name]=t,-1===h.indexOf(t.name)&&(t.setupOnce(c.b,o.b),h.push(t.name))})),e}},3205:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1616);function o(t,e){!0===e.debug&&console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.");const n=Object(r.b)(),o=n.getScope();o&&o.update(e.initialScope);const c=new t(e);n.bindClient(c)}},3369:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(3917),o=n(3956),c=n(2046),h=n(3914),d=n(3915),time=n(3911),_=n(3197),l=n(3195),f=n(3196),m=n(2622);var v=n(2931),S=n(2047),O=n(2234);class y{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}constructor(t){if(y.prototype.__init.call(this),y.prototype.__init2.call(this),y.prototype.__init3.call(this),y.prototype.__init4.call(this),this._options=t,t.dsn){this._dsn=Object(r.b)(t.dsn);const e=Object(m.a)(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if(Object(o.d)(t))return;let r=e&&e.event_id;return this._process(this.eventFromException(t,e).then((t=>this._captureEvent(t,e,n))).then((t=>{r=t}))),r}captureMessage(t,e,n,r){let o=n&&n.event_id;const h=Object(c.j)(t)?this.eventFromMessage(String(t),e,n):this.eventFromException(t,n);return this._process(h.then((t=>this._captureEvent(t,n,r))).then((t=>{o=t}))),o}captureEvent(t,e,n){if(e&&e.originalException&&Object(o.d)(e.originalException))return;let r=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((t=>{r=t}))),r}captureSession(t){this._isEnabled()&&("string"!=typeof t.release||(this.sendSession(t),Object(O.c)(t,{init:!1})))}getDsn(){return this._dsn}getOptions(){return this._options}getTransport(){return this._transport}flush(t){const e=this._transport;return e?this._isClientDoneProcessing(t).then((n=>e.flush(t).then((t=>n&&t)))):Object(h.c)(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,t)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=Object(v.b)(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(t){return null}}sendEvent(t,e={}){if(this._dsn){let n=function(t,e,n,r){const o=Object(d.g)(n),c=t.type||"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const h=Object(d.d)(t,o,r,e);delete t.sdkProcessingMetadata;const _=[{type:c},t];return Object(d.c)(h,[_])}(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=Object(d.a)(n,Object(d.b)(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));this._sendEnvelope(n)}}sendSession(t){if(this._dsn){const e=function(t,e,n,o){const c=Object(d.g)(n),h={sent_at:(new Date).toISOString(),...c&&{sdk:c},...!!o&&{dsn:Object(r.a)(e)}},_="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t];return Object(d.c)(h,[_])}(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const n=`${t}:${e}`;this._outcomes[n]=this._outcomes[n]+1||1}}_updateSessionFromEvent(t,e){let n=!1,r=!1;const o=e.exception&&e.exception.values;if(o){r=!0;for(const t of o){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const c="ok"===t.status;(c&&0===t.errors||c&&n)&&(Object(O.c)(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new h.a((e=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(n+=1,t&&n>=t&&(clearInterval(r),e(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(t,e,n){const{normalizeDepth:r=3,normalizeMaxBreadth:c=1e3}=this.getOptions(),d={...t,event_id:t.event_id||e.event_id||Object(o.f)(),timestamp:t.timestamp||Object(time.b)()};this._applyClientOptions(d),this._applyIntegrationsMetadata(d);let _=n;e.captureContext&&(_=S.a.clone(_).update(e.captureContext));let l=Object(h.c)(d);if(_&&_.getAttachments){const t=[...e.attachments||[],..._.getAttachments()];t.length&&(e.attachments=t),l=_.applyToEvent(d,e)}return l.then((t=>"number"==typeof r&&r>0?this._normalizeEvent(t,r,c):t))}_normalizeEvent(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((b=>({...b,...b.data&&{data:Object(_.a)(b.data,e,n)}})))},...t.user&&{user:Object(_.a)(t.user,e,n)},...t.contexts&&{contexts:Object(_.a)(t.contexts,e,n)},...t.extra&&{extra:Object(_.a)(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=Object(_.a)(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map((span=>(span.data&&(span.data=Object(_.a)(span.data,e,n)),span)))),r}_applyClientOptions(t){const e=this.getOptions(),{environment:n,release:r,dist:o,maxValueLength:c=250}=e;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==o&&(t.dist=o),t.message&&(t.message=Object(l.d)(t.message,c));const h=t.exception&&t.exception.values&&t.exception.values[0];h&&h.value&&(h.value=Object(l.d)(h.value,c));const d=t.request;d&&d.url&&(d.url=Object(l.d)(d.url,c))}_applyIntegrationsMetadata(t){const e=Object.keys(this._integrations);e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then((t=>t.event_id),(t=>{0}))}_processEvent(t,e,n){const r=this.getOptions(),{sampleRate:o}=r;if(!this._isEnabled())return Object(h.b)(new f.a("SDK not enabled, will not capture event.","log"));const d=j(t),_=x(t),l=t.type||"error",m=`before send for type \`${l}\``;return _&&"number"==typeof o&&Math.random()>o?(this.recordDroppedEvent("sample_rate","error",t),Object(h.b)(new f.a(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"))):this._prepareEvent(t,e,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,t),new f.a("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const o=function(t,e,n){const{beforeSend:r,beforeSendTransaction:o}=t;if(x(e)&&r)return r(e,n);if(j(e)&&o)return o(e,n);return e}(r,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Object(c.n)(t))return t.then((t=>{if(!Object(c.i)(t)&&null!==t)throw new f.a(n);return t}),(t=>{throw new f.a(`${e} rejected with ${t}`)}));if(!Object(c.i)(t)&&null!==t)throw new f.a(n);return t}(o,m)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",t.type||"error",t),new f.a(`${m} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!d&&o&&this._updateSessionFromEvent(o,r);const c=r.transaction_info;if(d&&c&&r.transaction!==t.transaction){const source="custom";r.transaction_info={...c,source:source,changes:[...c.changes,{source:source,timestamp:r.timestamp,propagations:c.propagations}]}}return this.sendEvent(r,e),r})).then(null,(t=>{if(t instanceof f.a)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new f.a(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t){this._numProcessing++,t.then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t)))}_sendEnvelope(t){this._transport&&this._dsn&&this._transport.send(t).then(null,(t=>{}))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map((e=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t[e]}}))}}function x(t){return void 0===t.type}function j(t){return"transaction"===t.type}}}]);