(window.webpackJsonp=window.webpackJsonp||[]).push([[1107],{1110:function(t,e,n){"use strict";n.r(e),n.d(e,"CaptureConsole",(function(){return d})),n.d(e,"Debug",(function(){return h})),n.d(e,"Dedupe",(function(){return f})),n.d(e,"ExtraErrorData",(function(){return C})),n.d(e,"Offline",(function(){return E})),n.d(e,"ReportingObserver",(function(){return R})),n.d(e,"RewriteFrames",(function(){return L})),n.d(e,"SessionTiming",(function(){return N})),n.d(e,"Transaction",(function(){return D}));var r=n(2926),o=n(2244),object=n(2621),c=n(3961),l=n(3195);class d{static __initStatic(){this.id="CaptureConsole"}__init(){this.name=d.id}__init2(){this._levels=r.a}constructor(t={}){d.prototype.__init.call(this),d.prototype.__init2.call(this),t.levels&&(this._levels=t.levels)}setupOnce(t,e){"console"in o.a&&this._levels.forEach((t=>{t in o.a.console&&Object(object.e)(o.a.console,t,(n=>(...r)=>{const h=e();h.getIntegration(d)&&h.withScope((e=>{e.setLevel(Object(c.a)(t)),e.setExtra("arguments",r),e.addEventProcessor((t=>(t.logger="console",t)));let n=Object(l.a)(r," ");"assert"===t?!1===r[0]&&(n=`Assertion failed: ${Object(l.a)(r.slice(1)," ")||"console.assert"}`,e.setExtra("arguments",r.slice(1)),h.captureMessage(n)):"error"===t&&r[0]instanceof Error?h.captureException(r[0]):h.captureMessage(n)})),n&&n.apply(o.a.console,r)}))}))}}d.__initStatic();class h{static __initStatic(){this.id="Debug"}__init(){this.name=h.id}constructor(t){h.prototype.__init.call(this),this._options={debugger:!1,stringify:!1,...t}}setupOnce(t,e){t(((t,n)=>{const o=e().getIntegration(h);return o&&(o._options.debugger,Object(r.b)((()=>{o._options.stringify?(console.log(JSON.stringify(t,null,2)),Object.keys(n).length&&console.log(JSON.stringify(n,null,2))):(console.log(t),Object.keys(n).length&&console.log(n))}))),t}))}}h.__initStatic();class f{constructor(){f.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=f.id}setupOnce(t,e){const n=t=>{const n=e().getIntegration(f);if(n){try{if(function(t,e){if(!e)return!1;if(function(t,e){const n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!v(t,e))return!1;if(!m(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){const n=y(e),r=y(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!v(t,e))return!1;if(!m(t,e))return!1;return!0}(t,e))return!0;return!1}(t,n._previousEvent))return null}catch(e){return n._previousEvent=t}return n._previousEvent=t}return t};n.id=this.name,t(n)}}function m(t,e){let n=_(t),r=_(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,r=r,r.length!==n.length)return!1;for(let i=0;i<r.length;i++){const t=r[i],e=n[i];if(t.filename!==e.filename||t.lineno!==e.lineno||t.colno!==e.colno||t.function!==e.function)return!1}return!0}function v(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(t){return!1}}function y(t){return t.exception&&t.exception.values&&t.exception.values[0]}function _(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}f.__initStatic();var S=n(2046),x=n(3197);class C{static __initStatic(){this.id="ExtraErrorData"}__init(){this.name=C.id}constructor(t){C.prototype.__init.call(this),this._options={depth:3,...t}}setupOnce(t,e){t(((t,n)=>{const r=e().getIntegration(C);return r?r.enhanceEventWithErrorData(t,n):t}))}enhanceEventWithErrorData(t,e={}){if(!e.originalException||!Object(S.d)(e.originalException))return t;const n=e.originalException.name||e.originalException.constructor.name,r=this._extractErrorData(e.originalException);if(r){const e={...t.contexts},o=Object(x.a)(r,this._options.depth);return Object(S.i)(o)&&(Object(object.a)(o,"__sentry_skip_normalization__",!0),e[n]=o),{...t,contexts:e}}return t}_extractErrorData(t){try{const e=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],n={};for(const r of Object.keys(t)){if(-1!==e.indexOf(r))continue;const o=t[r];n[r]=Object(S.d)(o)?o.toString():o}if("function"==typeof t.toJSON){const e=t.toJSON();for(const t of Object.keys(e)){const r=e[t];n[t]=Object(S.d)(r)?r.toString():r}}return n}catch(t){}return null}}C.__initStatic();var k=n(3956),w=n(3931),I=n.n(w);const O=o.a;class E{static __initStatic(){this.id="Offline"}__init(){this.name=E.id}constructor(t={}){E.prototype.__init.call(this),this.maxStoredEvents=t.maxStoredEvents||30,this.offlineEventStore=I.a.createInstance({name:"sentry/offlineEventStore"})}setupOnce(t,e){this.hub=e(),"addEventListener"in O&&O.addEventListener("online",(()=>{this._sendEvents().catch((()=>{}))}));const n=t=>this.hub&&this.hub.getIntegration(E)&&"navigator"in O&&"onLine"in O.navigator&&!O.navigator.onLine?(this._cacheEvent(t).then((t=>this._enforceMaxEvents())).catch((t=>{})),null):t;n.id=this.name,t(n),"navigator"in O&&"onLine"in O.navigator&&O.navigator.onLine&&this._sendEvents().catch((()=>{}))}async _cacheEvent(t){return this.offlineEventStore.setItem(Object(k.f)(),Object(x.a)(t))}async _enforceMaxEvents(){const t=[];return this.offlineEventStore.iterate(((e,n,r)=>{t.push({cacheKey:n,event:e})})).then((()=>this._purgeEvents(t.sort(((a,b)=>(b.event.timestamp||0)-(a.event.timestamp||0))).slice(this.maxStoredEvents<t.length?this.maxStoredEvents:t.length).map((t=>t.cacheKey))))).catch((t=>{}))}async _purgeEvent(t){return this.offlineEventStore.removeItem(t)}async _purgeEvents(t){return Promise.all(t.map((t=>this._purgeEvent(t)))).then()}async _sendEvents(){return this.offlineEventStore.iterate(((t,e,n)=>{this.hub&&(this.hub.captureEvent(t),this._purgeEvent(e).catch((t=>{})))}))}}E.__initStatic();var T=n(3923);const M=o.a;class R{static __initStatic(){this.id="ReportingObserver"}__init(){this.name=R.id}constructor(t={types:["crash","deprecation","intervention"]}){this._options=t,R.prototype.__init.call(this)}setupOnce(t,e){if(!Object(T.e)())return;this._getCurrentHub=e;new M.ReportingObserver(this.handler.bind(this),{buffered:!0,types:this._options.types}).observe()}handler(t){const e=this._getCurrentHub&&this._getCurrentHub();if(e&&e.getIntegration(R))for(const n of t)e.withScope((t=>{t.setExtra("url",n.url);const label=`ReportingObserver [${n.type}]`;let details="No details available";if(n.body){const e={};for(const t in n.body)e[t]=n.body[t];if(t.setExtra("body",e),"crash"===n.type){const body=n.body;details=[body.crashId||"",body.reason||""].join(" ").trim()||details}else{details=n.body.message||details}}e.captureMessage(`${label}: ${details}`)}))}}R.__initStatic();var path=n(3964);class L{static __initStatic(){this.id="RewriteFrames"}__init(){this.name=L.id}__init2(){this._prefix="app:///"}constructor(t={}){L.prototype.__init.call(this),L.prototype.__init2.call(this),L.prototype.__init3.call(this),t.root&&(this._root=t.root),t.prefix&&(this._prefix=t.prefix),t.iteratee&&(this._iteratee=t.iteratee)}setupOnce(t,e){t((t=>{const n=e().getIntegration(L);return n?n.process(t):t}))}process(t){let e=t;return t.exception&&Array.isArray(t.exception.values)&&(e=this._processExceptionsEvent(e)),e}__init3(){this._iteratee=t=>{if(!t.filename)return t;const e=/^[A-Z]:\\/.test(t.filename),n=/^\//.test(t.filename);if(e||n){const n=e?t.filename.replace(/^[A-Z]:/,"").replace(/\\/g,"/"):t.filename,base=this._root?Object(path.b)(this._root,n):Object(path.a)(n);t.filename=`${this._prefix}${base}`}return t}}_processExceptionsEvent(t){try{return{...t,exception:{...t.exception,values:t.exception.values.map((t=>({...t,...t.stacktrace&&{stacktrace:this._processStacktrace(t.stacktrace)}})))}}}catch(e){return t}}_processStacktrace(t){return{...t,frames:t&&t.frames&&t.frames.map((t=>this._iteratee(t)))}}}L.__initStatic();class N{constructor(){N.prototype.__init.call(this),N.prototype.__init2.call(this)}static __initStatic(){this.id="SessionTiming"}__init(){this.name=N.id}__init2(){this._startTime=Date.now()}setupOnce(t,e){t((t=>{const n=e().getIntegration(N);return n?n.process(t):t}))}process(t){const e=Date.now();return{...t,extra:{...t.extra,"session:start":this._startTime,"session:duration":e-this._startTime,"session:end":e}}}}N.__initStatic();class D{constructor(){D.prototype.__init.call(this)}static __initStatic(){this.id="Transaction"}__init(){this.name=D.id}setupOnce(t,e){t((t=>{const n=e().getIntegration(D);return n?n.process(t):t}))}process(t){const e=this._getFramesFromEvent(t);for(let i=e.length-1;i>=0;i--){const n=e[i];if(!0===n.in_app){t.transaction=this._getTransaction(n);break}}return t}_getFramesFromEvent(t){const e=t.exception&&t.exception.values&&t.exception.values[0];return e&&e.stacktrace&&e.stacktrace.frames||[]}_getTransaction(t){return t.module||t.function?`${t.module||"?"}/${t.function||"?"}`:"<unknown>"}}D.__initStatic()},1827:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return r}));const r=n(2244).a,o="sentryReplaySession",c="replay_event",l="Unable to send Replay",d=3e5,h=d,f=36e5,m=.1,v=1,y="body *:not(style,script)"},2235:function(t,e,n){"use strict";var r,o,c,l,d,h;n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),function(t){t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin"}(r||(r={})),function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration"}(o||(o={})),function(t){t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel"}(c||(c={})),function(t){t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2"}(l||(l={})),function(t){t[t.Play=0]="Play",t[t.Pause=1]="Pause",t[t.Seeked=2]="Seeked",t[t.VolumeChange=3]="VolumeChange"}(d||(d={})),function(t){t.Start="start",t.Pause="pause",t.Resume="resume",t.Resize="resize",t.Finish="finish",t.FullsnapshotRebuilded="fullsnapshot-rebuilded",t.LoadStylesheetStart="load-stylesheet-start",t.LoadStylesheetEnd="load-stylesheet-end",t.SkipStart="skip-start",t.SkipEnd="skip-end",t.MouseInteraction="mouse-interaction",t.EventCast="event-cast",t.CustomEvent="custom-event",t.Flush="flush",t.StateChange="state-change",t.PlayBack="play-back"}(h||(h={}))},3919:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}}).call(this,n(60))},3932:function(t,e,n){"use strict";n.d(e,"a",(function(){return Be}));var r=n(1616),o=n(1827),c=n(3958),l=n(2047),d=n(1296),h=n(3960),f=n(3919),m=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,y=/^0b[01]+$/i,_=/^0o[0-7]+$/i,S=parseInt,x="object"==typeof f.a&&f.a&&f.a.Object===Object&&f.a,C="object"==typeof self&&self&&self.Object===Object&&self,k=x||C,w=Object.prototype.toString,I=Math.max,O=Math.min,E=function(){return k.Date.now()};function T(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function M(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==w.call(t)}(t))return NaN;if(T(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=T(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(m,"");var n=y.test(t);return n||_.test(t)?S(t.slice(2),n?2:8):v.test(t)?NaN:+t}var R,L=function(t,e,n){var r,o,c,l,d,h,f=0,m=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function _(time){var e=r,n=o;return r=o=void 0,f=time,l=t.apply(n,e)}function S(time){return f=time,d=setTimeout(C,e),m?_(time):l}function x(time){var t=time-h;return void 0===h||t>=e||t<0||v&&time-f>=c}function C(){var time=E();if(x(time))return k(time);d=setTimeout(C,function(time){var t=e-(time-h);return v?O(t,c-(time-f)):t}(time))}function k(time){return d=void 0,y&&r?_(time):(r=o=void 0,l)}function w(){var time=E(),t=x(time);if(r=arguments,o=this,h=time,t){if(void 0===d)return S(h);if(v)return d=setTimeout(C,e),_(h)}return void 0===d&&(d=setTimeout(C,e)),l}return e=M(e)||0,T(n)&&(m=!!n.leading,c=(v="maxWait"in n)?I(M(n.maxWait)||0,e):c,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==d&&clearTimeout(d),f=0,r=h=o=d=void 0},w.flush=function(){return void 0===d?l:k(E())},w},N=n(3910),D=n(2929),j=function(){return j=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},j.apply(this,arguments)};function A(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function P(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function z(t){return t.nodeType===t.ELEMENT_NODE}function W(t){var e,n=null===(e=t)||void 0===e?void 0:e.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===t)}function U(t){var e=t.maskInputOptions,n=t.tagName,r=t.type,o=t.value,c=t.maskInputFn,text=o||"";return(e[n.toLowerCase()]||e[r])&&(text=c?c(text):"*".repeat(text.length)),text}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(R||(R={}));var B="__rrweb_original__";var H,$,V=1,G=new RegExp("[^a-z0-9-_:]");function J(s){try{var t=s.rules||s.cssRules;return t?Array.from(t).map(X).join(""):null}catch(t){return null}}function X(t){var e=t.cssText;if(function(t){return"styleSheet"in t}(t))try{e=J(t.styleSheet)||e}catch(t){}return e}var Y=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,K=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,Z=/^(data:)([^,]*),(.*)/i;function Q(t,e){return(t||"").replace(Y,(function(t,n,r,o,c,l){var d,h=r||c||l,f=n||o||"";if(!h)return t;if(!K.test(h))return"url("+f+h+f+")";if(Z.test(h))return"url("+f+h+f+")";if("/"===h[0])return"url("+f+(((d=e).indexOf("//")>-1?d.split("/").slice(0,3).join("/"):d.split("/")[0]).split("?")[0]+h)+f+")";var m=e.split("/"),v=h.split("/");m.pop();for(var y=0,_=v;y<_.length;y++){var S=_[y];"."!==S&&(".."===S?m.pop():m.push(S))}return"url("+f+m.join("/")+f+")"}))}var tt=/^[^ \t\n\r\u000c]+/,et=/^[, \t\n\r\u000c]+/;function nt(t,e){if(!e||""===e.trim())return e;var a=t.createElement("a");return a.href=e,a.href}function it(){var a=document.createElement("a");return a.href="",a.href}function ot(t,e,n,r){return"src"===n||"href"===n&&r||"xlink:href"===n&&r&&"#"!==r[0]?nt(t,r):"background"!==n||!r||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n&&r?function(t,e){if(""===e.trim())return e;var n=0;function r(t){var r,o=t.exec(e.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var output=[];r(et),!(n>=e.length);){var o=r(tt);if(","===o.slice(-1))o=nt(t,o.substring(0,o.length-1)),output.push(o);else{var c="";o=nt(t,o);for(var l=!1;;){var d=e.charAt(n);if(""===d){output.push((o+c).trim());break}if(l)")"===d&&(l=!1);else{if(","===d){n+=1,output.push((o+c).trim());break}"("===d&&(l=!0)}c+=d,n+=1}}}return output.join(", ")}(t,r):"style"===n&&r?Q(r,it()):"object"===e&&"data"===n&&r?nt(t,r):r:nt(t,r)}function at(t,e,n){if(!t)return!1;if(t.nodeType===t.ELEMENT_NODE){if("string"==typeof e){if(t.classList.contains(e))return!0}else for(var r=0;r<t.classList.length;r++){var o=t.classList[r];if(e.test(o))return!0}return!(!n||!t.matches(n))||at(t.parentNode,e,n)}return t.nodeType,t.TEXT_NODE,at(t.parentNode,e,n)}function st(t,e){var n,r,o,c,l=e.doc,d=e.blockClass,h=e.blockSelector,f=e.maskTextClass,m=e.maskTextSelector,v=e.inlineStylesheet,y=e.maskInputOptions,_=void 0===y?{}:y,S=e.maskTextFn,x=e.maskInputFn,C=e.dataURLOptions,k=void 0===C?{}:C,w=e.inlineImages,I=e.recordCanvas,O=e.keepIframeSrcFn;if(l.__sn){var E=l.__sn.id;r=1===E?void 0:E}switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:R.Document,childNodes:[],compatMode:t.compatMode,rootId:r}:{type:R.Document,childNodes:[],rootId:r};case t.DOCUMENT_TYPE_NODE:return{type:R.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:r};case t.ELEMENT_NODE:for(var T=function(element,t,e){if("string"==typeof t){if(element.classList.contains(t))return!0}else for(var n=0;n<element.classList.length;n++){var r=element.classList[n];if(t.test(r))return!0}return!!e&&element.matches(e)}(t,d,h),M=function(element){if(element instanceof HTMLFormElement)return"form";var t=element.tagName.toLowerCase().trim();return G.test(t)?"div":t}(t),L={},N=0,D=Array.from(t.attributes);N<D.length;N++){var j=D[N],A=j.name,F=j.value;L[A]=ot(l,M,A,F)}if("link"===M&&v){var P=Array.from(l.styleSheets).find((function(s){return s.href===t.href})),z=null;P&&(z=J(P)),z&&(delete L.rel,delete L.href,L._cssText=Q(z,P.href))}if("style"===M&&t.sheet&&!(t.innerText||t.textContent||"").trim().length)(z=J(t.sheet))&&(L._cssText=Q(z,it()));if("input"===M||"textarea"===M||"select"===M){F=t.value;"radio"!==L.type&&"checkbox"!==L.type&&"submit"!==L.type&&"button"!==L.type&&F?L.value=U({type:L.type,tagName:M,value:F,maskInputOptions:_,maskInputFn:x}):t.checked&&(L.checked=t.checked)}if("option"===M&&(t.selected&&!_.select?L.selected=!0:delete L.selected),"canvas"===M&&I)if("2d"===t.__context)(function(canvas){var t=canvas.getContext("2d");if(!t)return!0;for(var e=0;e<canvas.width;e+=50)for(var n=0;n<canvas.height;n+=50){var r=t.getImageData,o=B in r?r.__rrweb_original__:r;if(new Uint32Array(o.call(t,e,n,Math.min(50,canvas.width-e),Math.min(50,canvas.height-n)).data.buffer).some((function(t){return 0!==t})))return!1}return!0})(t)||(L.rr_dataURL=t.toDataURL(k.type,k.quality));else if(!("__context"in t)){var W=t.toDataURL(k.type,k.quality),V=document.createElement("canvas");V.width=t.width,V.height=t.height,W!==V.toDataURL(k.type,k.quality)&&(L.rr_dataURL=W)}if("img"===M&&w){H||(H=l.createElement("canvas"),$=H.getContext("2d"));var X=t,Y=X.crossOrigin;X.crossOrigin="anonymous";var K=function(){try{H.width=X.naturalWidth,H.height=X.naturalHeight,$.drawImage(X,0,0),L.rr_dataURL=H.toDataURL(k.type,k.quality)}catch(t){console.warn("Cannot inline img src="+X.currentSrc+"! Error: "+t)}Y?L.crossOrigin=Y:delete L.crossOrigin};X.complete&&0!==X.naturalWidth?K():X.onload=K}if("audio"!==M&&"video"!==M||(L.rr_mediaState=t.paused?"paused":"played",L.rr_mediaCurrentTime=t.currentTime),t.scrollLeft&&(L.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(L.rr_scrollTop=t.scrollTop),T){var Z=t.getBoundingClientRect(),tt=Z.width,et=Z.height;L={class:L.class,rr_width:tt+"px",rr_height:et+"px"}}return"iframe"!==M||O(L.src)||(t.contentDocument||(L.rr_src=L.src),delete L.src),{type:R.Element,tagName:M,attributes:L,childNodes:[],isSVG:(c=t,Boolean("svg"===c.tagName||c.ownerSVGElement)||void 0),needBlock:T,rootId:r};case t.TEXT_NODE:var nt=t.parentNode&&t.parentNode.tagName,st=t.textContent,ct="STYLE"===nt||void 0,ut="SCRIPT"===nt||void 0;if(ct&&st){try{t.nextSibling||t.previousSibling||(null===(n=t.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(st=(o=t.parentNode.sheet).cssRules?Array.from(o.cssRules).map((function(t){return t.cssText||""})).join(""):"")}catch(e){console.warn("Cannot get CSS styles from text's parentNode. Error: "+e,t)}st=Q(st,it())}return ut&&(st="SCRIPT_PLACEHOLDER"),!ct&&!ut&&at(t,f,m)&&st&&(st=S?S(st):st.replace(/[\S]/g,"*")),{type:R.Text,textContent:st||"",isStyle:ct,rootId:r};case t.CDATA_SECTION_NODE:return{type:R.CDATA,textContent:"",rootId:r};case t.COMMENT_NODE:return{type:R.Comment,textContent:t.textContent||"",rootId:r};default:return!1}}function ct(t){return void 0===t?"":t.toLowerCase()}function ut(t,e){var n,r=e.doc,map=e.map,o=e.blockClass,c=e.blockSelector,l=e.maskTextClass,d=e.maskTextSelector,h=e.skipChild,f=void 0!==h&&h,m=e.inlineStylesheet,v=void 0===m||m,y=e.maskInputOptions,_=void 0===y?{}:y,S=e.maskTextFn,x=e.maskInputFn,C=e.slimDOMOptions,k=e.dataURLOptions,w=void 0===k?{}:k,I=e.inlineImages,O=void 0!==I&&I,E=e.recordCanvas,T=void 0!==E&&E,M=e.onSerialize,L=e.onIframeLoad,N=e.iframeLoadTimeout,D=void 0===N?5e3:N,j=e.keepIframeSrcFn,A=void 0===j?function(){return!1}:j,F=e.preserveWhiteSpace,P=void 0===F||F,U=st(t,{doc:r,blockClass:o,blockSelector:c,maskTextClass:l,maskTextSelector:d,inlineStylesheet:v,maskInputOptions:_,maskTextFn:S,maskInputFn:x,dataURLOptions:w,inlineImages:O,recordCanvas:T,keepIframeSrcFn:A});if(!U)return console.warn(t,"not serialized"),null;n="__sn"in t?t.__sn.id:!function(t,e){if(e.comment&&t.type===R.Comment)return!0;if(t.type===R.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&"preload"===t.attributes.rel&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"==typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(ct(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===ct(t.attributes.name)||"icon"===ct(t.attributes.rel)||"apple-touch-icon"===ct(t.attributes.rel)||"shortcut icon"===ct(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&ct(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(ct(t.attributes.property).match(/^(og|twitter|fb):/)||ct(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===ct(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===ct(t.attributes.name)||"googlebot"===ct(t.attributes.name)||"bingbot"===ct(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===ct(t.attributes.name)||"generator"===ct(t.attributes.name)||"framework"===ct(t.attributes.name)||"publisher"===ct(t.attributes.name)||"progid"===ct(t.attributes.name)||ct(t.attributes.property).match(/^article:/)||ct(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===ct(t.attributes.name)||"yandex-verification"===ct(t.attributes.name)||"csrf-token"===ct(t.attributes.name)||"p:domain_verify"===ct(t.attributes.name)||"verify-v1"===ct(t.attributes.name)||"verification"===ct(t.attributes.name)||"shopify-checkout-api-token"===ct(t.attributes.name)))return!0}}return!1}(U,C)&&(P||U.type!==R.Text||U.isStyle||U.textContent.replace(/^\s+|\s+$/gm,"").length)?V++:-2;var B=Object.assign(U,{id:n});if(t.__sn=B,-2===n)return null;map[n]=t,M&&M(t);var H=!f;if(B.type===R.Element&&(H=H&&!B.needBlock,delete B.needBlock,t.shadowRoot&&(B.isShadowHost=!0)),(B.type===R.Document||B.type===R.Element)&&H){C.headWhitespace&&U.type===R.Element&&"head"===U.tagName&&(P=!1);for(var $={doc:r,map:map,blockClass:o,blockSelector:c,maskTextClass:l,maskTextSelector:d,skipChild:f,inlineStylesheet:v,maskInputOptions:_,maskTextFn:S,maskInputFn:x,slimDOMOptions:C,dataURLOptions:w,inlineImages:O,recordCanvas:T,preserveWhiteSpace:P,onSerialize:M,onIframeLoad:L,iframeLoadTimeout:D,keepIframeSrcFn:A},G=0,J=Array.from(t.childNodes);G<J.length;G++){(K=ut(J[G],$))&&B.childNodes.push(K)}if(z(t)&&t.shadowRoot)for(var X=0,Y=Array.from(t.shadowRoot.childNodes);X<Y.length;X++){var K;(K=ut(Y[X],$))&&(K.isShadow=!0,B.childNodes.push(K))}}return t.parentNode&&W(t.parentNode)&&(B.isShadow=!0),B.type===R.Element&&"iframe"===B.tagName&&function(t,e,n){var r=t.contentWindow;if(r){var o,c=!1;try{o=r.document.readyState}catch(t){return}if("complete"===o){var l="about:blank";r.location.href===l&&t.src!==l&&""!==t.src?t.addEventListener("load",e):setTimeout(e,0)}else{var d=setTimeout((function(){c||(e(),c=!0)}),n);t.addEventListener("load",(function(){clearTimeout(d),c=!0,e()}))}}}(t,(function(){var e=t.contentDocument;if(e&&L){var n=ut(e,{doc:e,map:map,blockClass:o,blockSelector:c,maskTextClass:l,maskTextSelector:d,skipChild:!1,inlineStylesheet:v,maskInputOptions:_,maskTextFn:S,maskInputFn:x,slimDOMOptions:C,dataURLOptions:w,inlineImages:O,recordCanvas:T,preserveWhiteSpace:P,onSerialize:M,onIframeLoad:L,iframeLoadTimeout:D,keepIframeSrcFn:A});n&&L(t,n)}}),D),B}var lt=/([^\\]):hover/;new RegExp(lt.source,"g");var pt=n(2235);function ht(t,e,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(t,e,r),function(){return n.removeEventListener(t,e,r)}}var ft="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",mt={map:{},getId:function(){return console.error(ft),-1},getNode:function(){return console.error(ft),null},removeNodeFromMap:function(){console.error(ft)},has:function(){return console.error(ft),!1},reset:function(){console.error(ft)}};function vt(t,e,n){void 0===n&&(n={});var r=null,o=0;return function(c){var l=Date.now();o||!1!==n.leading||(o=l);var d=e-(l-o),h=this,f=arguments;d<=0||d>e?(r&&(clearTimeout(r),r=null),o=l,t.apply(h,f)):r||!1===n.trailing||(r=setTimeout((function(){o=!1===n.leading?0:Date.now(),r=null,t.apply(h,f)}),d))}}function yt(t,e,n,r,o){void 0===o&&(o=window);var c=o.Object.getOwnPropertyDescriptor(t,e);return o.Object.defineProperty(t,e,r?n:{set:function(t){var e=this;setTimeout((function(){n.set.call(e,t)}),0),c&&c.set&&c.set.call(this,t)}}),function(){return yt(t,e,c||{},!0)}}function gt(source,t,e){try{if(!(t in source))return function(){};var n=source[t],r=e(n);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:n}})),source[t]=r,function(){source[t]=n}}catch(t){return function(){}}}function bt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function _t(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function St(t,e){if(!t)return!1;if(t.nodeType===t.ELEMENT_NODE){var n=!1;if("string"==typeof e){if(void 0!==t.closest)return null!==t.closest("."+e);n=t.classList.contains(e)}else t.classList.forEach((function(t){e.test(t)&&(n=!0)}));return n||St(t.parentNode,e)}return t.nodeType,t.TEXT_NODE,St(t.parentNode,e)}function xt(t){return"__sn"in t&&-2===t.__sn.id}function Ct(t,e){if(W(t))return!1;var n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||Ct(t.parentNode,e))}function kt(t){return Boolean(t.changedTouches)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(mt=new Proxy(mt,{get:function(t,e,n){return"map"===e&&console.error(ft),Reflect.get(t,e,n)}}));!function(){function t(){this.reset()}t.prototype.add=function(t){var e=this.indexes.get(t.parentId),n={id:t.node.id,mutation:t,children:[],texts:[],attributes:[]};e?(n.parent=e,e.children[n.id]=n):this.tree[n.id]=n,this.indexes.set(n.id,n)},t.prototype.remove=function(t,e){var n=this,r=this.indexes.get(t.parentId),o=this.indexes.get(t.id),c=function(t){n.removeIdSet.add(t);var r=e.getNode(t);null==r||r.childNodes.forEach((function(t){"__sn"in t&&c(t.__sn.id)}))},l=function(e){n.removeIdSet.add(e.id),Object.values(e.children).forEach((function(t){return l(t)}));var r=n.indexes.get(e.id);if(r){var o=r.parent;o&&(delete r.parent,delete o.children[r.id],n.indexes.delete(t.id))}};o?r?(delete o.parent,delete r.children[o.id],this.indexes.delete(t.id),l(o)):(delete this.tree[o.id],this.indexes.delete(o.id),l(o)):(this.removeNodeMutations.push(t),c(t.id))},t.prototype.text=function(t){var e=this.indexes.get(t.id);e?e.texts.push(t):this.textMutations.push(t)},t.prototype.attribute=function(t){var e=this.indexes.get(t.id);e?e.attributes.push(t):this.attributeMutations.push(t)},t.prototype.scroll=function(t){this.scrollMap.set(t.id,t)},t.prototype.input=function(t){this.inputMap.set(t.id,t)},t.prototype.flush=function(){var t,e,n,r,o=this,c=this,l=c.tree,d=c.removeNodeMutations,h=c.textMutations,f=c.attributeMutations,m={source:pt.c.Mutation,removes:d,texts:h,attributes:f,adds:[]},v=function(t,e){e&&o.removeIdSet.add(t.id),m.texts=m.texts.concat(e?[]:t.texts).filter((function(t){return!o.removeIdSet.has(t.id)})),m.attributes=m.attributes.concat(e?[]:t.attributes).filter((function(t){return!o.removeIdSet.has(t.id)})),o.removeIdSet.has(t.id)||o.removeIdSet.has(t.mutation.parentId)||e?Object.values(t.children).forEach((function(t){return v(t,!0)})):(m.adds.push(t.mutation),t.children&&Object.values(t.children).forEach((function(t){return v(t,!1)})))};Object.values(l).forEach((function(t){return v(t,!1)}));try{for(var y=A(this.scrollMap.keys()),_=y.next();!_.done;_=y.next()){var S=_.value;this.removeIdSet.has(S)&&this.scrollMap.delete(S)}}catch(e){t={error:e}}finally{try{_&&!_.done&&(e=y.return)&&e.call(y)}finally{if(t)throw t.error}}try{for(var x=A(this.inputMap.keys()),C=x.next();!C.done;C=x.next()){S=C.value;this.removeIdSet.has(S)&&this.inputMap.delete(S)}}catch(t){n={error:t}}finally{try{C&&!C.done&&(r=x.return)&&r.call(x)}finally{if(n)throw n.error}}var k=new Map(this.scrollMap),w=new Map(this.inputMap);return this.reset(),{mutationData:m,scrollMap:k,inputMap:w}},t.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},t.prototype.idRemoved=function(t){return this.removeIdSet.has(t)}}();function wt(t){return"__sn"in t&&(t.__sn.type===R.Element&&"iframe"===t.__sn.tagName)}function It(t){return Boolean(null==t?void 0:t.shadowRoot)}function Ot(t){return"__ln"in t}var Et=function(){function t(){this.length=0,this.head=null}return t.prototype.get=function(t){if(t>=this.length)throw new Error("Position outside of list range");for(var e=this.head,n=0;n<t;n++)e=(null==e?void 0:e.next)||null;return e},t.prototype.addNode=function(t){var e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&Ot(t.previousSibling)){var n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&Ot(t.nextSibling)&&t.nextSibling.__ln.previous){n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;this.length++},t.prototype.removeNode=function(t){var e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next&&(e.next.previous=e.previous)):(this.head=e.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)},t}(),Tt=function(t,e){return"".concat(t,"@").concat(e)};function Mt(t){return"__sn"in t}var Rt=function(){function t(){var t=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(e){e.forEach(t.processMutation),t.emit()},this.emit=function(){var e,n,r,o;if(!t.frozen&&!t.locked){for(var c=[],l=new Et,d=function(e){for(var n=e,r=-2;-2===r;)r=(n=n&&n.nextSibling)&&t.mirror.getId(n);return r},h=function(e){for(var n,r,o,h,f,m=e.getRootNode?null===(n=e.getRootNode())||void 0===n?void 0:n.host:null,v=m;null===(o=null===(r=null==v?void 0:v.getRootNode)||void 0===r?void 0:r.call(v))||void 0===o?void 0:o.host;)v=(null===(f=null===(h=null==v?void 0:v.getRootNode)||void 0===h?void 0:h.call(v))||void 0===f?void 0:f.host)||null;var y=!(t.doc.contains(e)||null!==v&&t.doc.contains(v));if(e.parentNode&&!y){var _=W(e.parentNode)?t.mirror.getId(m):t.mirror.getId(e.parentNode),S=d(e);if(-1===_||-1===S)return l.addNode(e);var x=ut(e,{doc:t.doc,map:t.mirror.map,blockClass:t.blockClass,blockSelector:t.blockSelector,maskTextClass:t.maskTextClass,maskTextSelector:t.maskTextSelector,skipChild:!0,inlineStylesheet:t.inlineStylesheet,maskInputOptions:t.maskInputOptions,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:t.slimDOMOptions,recordCanvas:t.recordCanvas,inlineImages:t.inlineImages,onSerialize:function(n){wt(n)&&t.iframeManager.addIframe(n),It(e)&&t.shadowDomManager.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(iframe,e){t.iframeManager.attachIframe(iframe,e),t.shadowDomManager.observeAttachShadow(iframe)}});x&&c.push({parentId:_,nextId:S,node:x})}};t.mapRemoves.length;)t.mirror.removeNodeFromMap(t.mapRemoves.shift());try{for(var f=A(t.movedSet),m=f.next();!m.done;m=f.next()){var v=m.value;Nt(t.removes,v,t.mirror)&&!t.movedSet.has(v.parentNode)||h(v)}}catch(t){e={error:t}}finally{try{m&&!m.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}try{for(var y=A(t.addedSet),_=y.next();!_.done;_=y.next()){v=_.value;Dt(t.droppedSet,v)||Nt(t.removes,v,t.mirror)?Dt(t.movedSet,v)?h(v):t.droppedSet.add(v):h(v)}}catch(t){r={error:t}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}for(var S=null;l.length;){var x=null;if(S){var C=t.mirror.getId(S.value.parentNode),k=d(S.value);-1!==C&&-1!==k&&(x=S)}if(!x)for(var w=l.length-1;w>=0;w--){var I=l.get(w);if(I){C=t.mirror.getId(I.value.parentNode),k=d(I.value);if(-1!==C&&-1!==k){x=I;break}}}if(!x){for(;l.head;)l.removeNode(l.head.value);break}S=x.previous,l.removeNode(x.value),h(x.value)}var O={texts:t.texts.map((function(text){return{id:t.mirror.getId(text.node),value:text.value}})).filter((function(text){return t.mirror.has(text.id)})),attributes:t.attributes.map((function(e){return{id:t.mirror.getId(e.node),attributes:e.attributes}})).filter((function(e){return t.mirror.has(e.id)})),removes:t.removes,adds:c};(O.texts.length||O.attributes.length||O.removes.length||O.adds.length)&&(t.texts=[],t.attributes=[],t.removes=[],t.addedSet=new Set,t.movedSet=new Set,t.droppedSet=new Set,t.movedMap={},t.mutationCb(O))}},this.processMutation=function(e){var n,r,o,c;if(!xt(e.target))switch(e.type){case"characterData":var l=e.target.textContent;St(e.target,t.blockClass)||l===e.oldValue||t.texts.push({value:at(e.target,t.maskTextClass,t.maskTextSelector)&&l?t.maskTextFn?t.maskTextFn(l):l.replace(/[\S]/g,"*"):l,node:e.target});break;case"attributes":var d=e.target;l=e.target.getAttribute(e.attributeName);if("value"===e.attributeName&&(l=U({maskInputOptions:t.maskInputOptions,tagName:e.target.tagName,type:e.target.getAttribute("type"),value:l,maskInputFn:t.maskInputFn})),St(e.target,t.blockClass)||l===e.oldValue)return;var h=t.attributes.find((function(a){return a.node===e.target}));if(h||(h={node:e.target,attributes:{}},t.attributes.push(h)),"style"===e.attributeName){var f=t.doc.createElement("span");e.oldValue&&f.setAttribute("style",e.oldValue),void 0!==h.attributes.style&&null!==h.attributes.style||(h.attributes.style={});var m=h.attributes.style;try{for(var v=A(Array.from(d.style)),y=v.next();!y.done;y=v.next()){var _=y.value,S=d.style.getPropertyValue(_),x=d.style.getPropertyPriority(_);S===f.style.getPropertyValue(_)&&x===f.style.getPropertyPriority(_)||(m[_]=""===x?S:[S,x])}}catch(t){n={error:t}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}try{for(var C=A(Array.from(f.style)),k=C.next();!k.done;k=C.next()){_=k.value;""===d.style.getPropertyValue(_)&&(m[_]=!1)}}catch(t){o={error:t}}finally{try{k&&!k.done&&(c=C.return)&&c.call(C)}finally{if(o)throw o.error}}}else h.attributes[e.attributeName]=ot(t.doc,e.target.tagName,e.attributeName,l);break;case"childList":e.addedNodes.forEach((function(n){return t.genAdds(n,e.target)})),e.removedNodes.forEach((function(n){var r=t.mirror.getId(n),o=W(e.target)?t.mirror.getId(e.target.host):t.mirror.getId(e.target);St(e.target,t.blockClass)||xt(n)||(t.addedSet.has(n)?(Lt(t.addedSet,n),t.droppedSet.add(n)):t.addedSet.has(e.target)&&-1===r||Ct(e.target,t.mirror)||(t.movedSet.has(n)&&t.movedMap[Tt(r,o)]?Lt(t.movedSet,n):t.removes.push({parentId:o,id:r,isShadow:!!W(e.target)||void 0})),t.mapRemoves.push(n))}))}},this.genAdds=function(e,n){if(!n||!St(n,t.blockClass)){if(Mt(e)){if(xt(e))return;t.movedSet.add(e);var r=null;n&&Mt(n)&&(r=n.__sn.id),r&&(t.movedMap[Tt(e.__sn.id,r)]=!0)}else t.addedSet.add(e),t.droppedSet.delete(e);St(e,t.blockClass)||e.childNodes.forEach((function(e){return t.genAdds(e)}))}}}return t.prototype.init=function(t){var e=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(n){e[n]=t[n]}))},t.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},t.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},t.prototype.isFrozen=function(){return this.frozen},t.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},t.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},t.prototype.reset=function(){this.shadowDomManager.reset(),this.canvasManager.reset()},t}();function Lt(t,e){t.delete(e),e.childNodes.forEach((function(e){return Lt(t,e)}))}function Nt(t,e,n){var r=e.parentNode;if(!r)return!1;var o=n.getId(r);return!!t.some((function(t){return t.id===o}))||Nt(t,r,n)}function Dt(t,e){var n=e.parentNode;return!!n&&(!!t.has(n)||Dt(t,n))}var jt=[],At="undefined"!=typeof CSSGroupingRule,Ft="undefined"!=typeof CSSMediaRule,Pt="undefined"!=typeof CSSSupportsRule,zt="undefined"!=typeof CSSConditionRule;function Wt(t){try{if("composedPath"in t){var path=t.composedPath();if(path.length)return path[0]}else if("path"in t&&t.path.length)return t.path[0];return t.target}catch(e){return t.target}}function Ut(t,e){var n,r,o=new Rt;jt.push(o),o.init(t);var c=window.MutationObserver||window.__rrMutationObserver,l=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");l&&window[l]&&(c=window[l]);var d=new c(o.processMutations.bind(o));return d.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),d}function Bt(t){var e=t.mouseInteractionCb,n=t.doc,r=t.mirror,o=t.blockClass,c=t.sampling;if(!1===c.mouseInteraction)return function(){};var l=!0===c.mouseInteraction||void 0===c.mouseInteraction?{}:c.mouseInteraction,d=[];return Object.keys(pt.d).filter((function(t){return Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==l[t]})).forEach((function(t){var c=t.toLowerCase(),l=function(t){return function(n){var c=Wt(n);if(!St(c,o)){var l=kt(n)?n.changedTouches[0]:n;if(l){var d=r.getId(c),h=l.clientX,f=l.clientY;e({type:pt.d[t],id:d,x:h,y:f})}}}}(t);d.push(ht(c,l,n))})),function(){d.forEach((function(t){return t()}))}}function Ht(t){var e=t.scrollCb,n=t.doc,r=t.mirror,o=t.blockClass;return ht("scroll",vt((function(t){var c=Wt(t);if(c&&!St(c,o)){var l=r.getId(c);if(c===n){var d=n.scrollingElement||n.documentElement;e({id:l,x:d.scrollLeft,y:d.scrollTop})}else e({id:l,x:c.scrollLeft,y:c.scrollTop})}}),t.sampling.scroll||100),n)}function $t(t,e){var n=j({},t);return e||delete n.userTriggered,n}var Vt=["INPUT","TEXTAREA","SELECT"],Gt=new WeakMap;function qt(t){return function(t,e){if(At&&t.parentRule instanceof CSSGroupingRule||Ft&&t.parentRule instanceof CSSMediaRule||Pt&&t.parentRule instanceof CSSSupportsRule||zt&&t.parentRule instanceof CSSConditionRule){var n=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(n)}else{n=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(n)}return e}(t,[])}function Jt(t,e){var n,r;void 0===e&&(e={});var o=t.doc.defaultView;if(!o)return function(){};!function(t,e){var n=t.mutationCb,r=t.mousemoveCb,o=t.mouseInteractionCb,c=t.scrollCb,l=t.viewportResizeCb,d=t.inputCb,h=t.mediaInteractionCb,f=t.styleSheetRuleCb,m=t.styleDeclarationCb,v=t.canvasMutationCb,y=t.fontCb;t.mutationCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.mutation&&e.mutation.apply(e,P([],F(p),!1)),n.apply(void 0,P([],F(p),!1))},t.mousemoveCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.mousemove&&e.mousemove.apply(e,P([],F(p),!1)),r.apply(void 0,P([],F(p),!1))},t.mouseInteractionCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.mouseInteraction&&e.mouseInteraction.apply(e,P([],F(p),!1)),o.apply(void 0,P([],F(p),!1))},t.scrollCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.scroll&&e.scroll.apply(e,P([],F(p),!1)),c.apply(void 0,P([],F(p),!1))},t.viewportResizeCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.viewportResize&&e.viewportResize.apply(e,P([],F(p),!1)),l.apply(void 0,P([],F(p),!1))},t.inputCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.input&&e.input.apply(e,P([],F(p),!1)),d.apply(void 0,P([],F(p),!1))},t.mediaInteractionCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.mediaInteaction&&e.mediaInteaction.apply(e,P([],F(p),!1)),h.apply(void 0,P([],F(p),!1))},t.styleSheetRuleCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.styleSheetRule&&e.styleSheetRule.apply(e,P([],F(p),!1)),f.apply(void 0,P([],F(p),!1))},t.styleDeclarationCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.styleDeclaration&&e.styleDeclaration.apply(e,P([],F(p),!1)),m.apply(void 0,P([],F(p),!1))},t.canvasMutationCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.canvasMutation&&e.canvasMutation.apply(e,P([],F(p),!1)),v.apply(void 0,P([],F(p),!1))},t.fontCb=function(){for(var p=[],t=0;t<arguments.length;t++)p[t]=arguments[t];e.font&&e.font.apply(e,P([],F(p),!1)),y.apply(void 0,P([],F(p),!1))}}(t,e);var c=Ut(t,t.doc),l=function(t){var e=t.mousemoveCb,n=t.sampling,r=t.doc,o=t.mirror;if(!1===n.mousemove)return function(){};var c,l="number"==typeof n.mousemove?n.mousemove:50,d="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,h=[],f=vt((function(source){var t=Date.now()-c;e(h.map((function(p){return p.timeOffset-=t,p})),source),h=[],c=null}),d),m=vt((function(t){var e=Wt(t),n=kt(t)?t.changedTouches[0]:t,r=n.clientX,l=n.clientY;c||(c=Date.now()),h.push({x:r,y:l,id:o.getId(e),timeOffset:Date.now()-c}),f("undefined"!=typeof DragEvent&&t instanceof DragEvent?pt.c.Drag:t instanceof MouseEvent?pt.c.MouseMove:pt.c.TouchMove)}),l,{trailing:!1}),v=[ht("mousemove",m,r),ht("touchmove",m,r),ht("drag",m,r)];return function(){v.forEach((function(t){return t()}))}}(t),d=Bt(t),h=Ht(t),f=function(t){var e=t.viewportResizeCb,n=-1,r=-1;return ht("resize",vt((function(){var t=bt(),o=_t();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)}),200),window)}(t),m=function(t){var e=t.inputCb,n=t.doc,r=t.mirror,o=t.blockClass,c=t.ignoreClass,l=t.maskInputOptions,d=t.maskInputFn,h=t.sampling,f=t.userTriggeredOnInput;function m(t){var e=Wt(t),r=t.isTrusted;if(e&&"OPTION"===e.tagName&&(e=e.parentElement),e&&e.tagName&&!(Vt.indexOf(e.tagName)<0)&&!St(e,o)){var h=e.type;if(!e.classList.contains(c)){var text=e.value,m=!1;"radio"===h||"checkbox"===h?m=e.checked:(l[e.tagName.toLowerCase()]||l[h])&&(text=U({maskInputOptions:l,tagName:e.tagName,type:h,value:text,maskInputFn:d})),v(e,$t({text:text,isChecked:m,userTriggered:r},f));var y=e.name;"radio"===h&&y&&m&&n.querySelectorAll('input[type="radio"][name="'.concat(y,'"]')).forEach((function(t){t!==e&&v(t,$t({text:t.value,isChecked:!m,userTriggered:!1},f))}))}}}function v(t,n){var o=Gt.get(t);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){Gt.set(t,n);var c=r.getId(t);e(j(j({},n),{id:c}))}}var y=("last"===h.input?["change"]:["input","change"]).map((function(t){return ht(t,m,n)})),_=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),S=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return _&&_.set&&y.push.apply(y,P([],F(S.map((function(p){return yt(p[0],p[1],{set:function(){m({target:this})}})}))),!1)),function(){y.forEach((function(t){return t()}))}}(t),v=function(t){var e=t.mediaInteractionCb,n=t.blockClass,r=t.mirror,o=t.sampling,c=function(t){return vt((function(o){var c=Wt(o);if(c&&!St(c,n)){var l=c,d=l.currentTime,h=l.volume,f=l.muted;e({type:t,id:r.getId(c),currentTime:d,volume:h,muted:f})}}),o.media||500)},l=[ht("play",c(0)),ht("pause",c(1)),ht("seeked",c(2)),ht("volumechange",c(3))];return function(){l.forEach((function(t){return t()}))}}(t),y=function(t,e){var n=t.styleSheetRuleCb,r=t.mirror,o=e.win,c=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=function(t,e){var o=r.getId(this.ownerNode);return-1!==o&&n({id:o,adds:[{rule:t,index:e}]}),c.apply(this,arguments)};var l=o.CSSStyleSheet.prototype.deleteRule;o.CSSStyleSheet.prototype.deleteRule=function(t){var e=r.getId(this.ownerNode);return-1!==e&&n({id:e,removes:[{index:t}]}),l.apply(this,arguments)};var d={};At?d.CSSGroupingRule=o.CSSGroupingRule:(Ft&&(d.CSSMediaRule=o.CSSMediaRule),zt&&(d.CSSConditionRule=o.CSSConditionRule),Pt&&(d.CSSSupportsRule=o.CSSSupportsRule));var h={};return Object.entries(d).forEach((function(t){var e=F(t,2),o=e[0],c=e[1];h[o]={insertRule:c.prototype.insertRule,deleteRule:c.prototype.deleteRule},c.prototype.insertRule=function(t,e){var c=r.getId(this.parentStyleSheet.ownerNode);return-1!==c&&n({id:c,adds:[{rule:t,index:P(P([],F(qt(this)),!1),[e||0],!1)}]}),h[o].insertRule.apply(this,arguments)},c.prototype.deleteRule=function(t){var e=r.getId(this.parentStyleSheet.ownerNode);return-1!==e&&n({id:e,removes:[{index:P(P([],F(qt(this)),!1),[t],!1)}]}),h[o].deleteRule.apply(this,arguments)}})),function(){o.CSSStyleSheet.prototype.insertRule=c,o.CSSStyleSheet.prototype.deleteRule=l,Object.entries(d).forEach((function(t){var e=F(t,2),n=e[0],r=e[1];r.prototype.insertRule=h[n].insertRule,r.prototype.deleteRule=h[n].deleteRule}))}}(t,{win:o}),_=function(t,e){var n=t.styleDeclarationCb,r=t.mirror,o=e.win,c=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(t,e,o){var l,d,h=r.getId(null===(d=null===(l=this.parentRule)||void 0===l?void 0:l.parentStyleSheet)||void 0===d?void 0:d.ownerNode);return-1!==h&&n({id:h,set:{property:t,value:e,priority:o},index:qt(this.parentRule)}),c.apply(this,arguments)};var l=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(t){var e,o,c=r.getId(null===(o=null===(e=this.parentRule)||void 0===e?void 0:e.parentStyleSheet)||void 0===o?void 0:o.ownerNode);return-1!==c&&n({id:c,remove:{property:t},index:qt(this.parentRule)}),l.apply(this,arguments)},function(){o.CSSStyleDeclaration.prototype.setProperty=c,o.CSSStyleDeclaration.prototype.removeProperty=l}}(t,{win:o}),S=t.collectFonts?function(t){var e=t.fontCb,n=t.doc,r=n.defaultView;if(!r)return function(){};var o=[],c=new WeakMap,l=r.FontFace;r.FontFace=function(t,source,e){var n=new l(t,source,e);return c.set(n,{family:t,buffer:"string"!=typeof source,descriptors:e,fontSource:"string"==typeof source?source:JSON.stringify(Array.from(new Uint8Array(source)))}),n};var d=gt(n.fonts,"add",(function(t){return function(n){return setTimeout((function(){var p=c.get(n);p&&(e(p),c.delete(n))}),0),t.apply(this,[n])}}));return o.push((function(){r.FontFace=l})),o.push(d),function(){o.forEach((function(t){return t()}))}}(t):function(){},x=[];try{for(var C=A(t.plugins),k=C.next();!k.done;k=C.next()){var w=k.value;x.push(w.observer(w.callback,o,w.options))}}catch(t){n={error:t}}finally{try{k&&!k.done&&(r=C.return)&&r.call(C)}finally{if(n)throw n.error}}return function(){jt.forEach((function(b){return b.reset()})),c.disconnect(),l(),d(),h(),f(),m(),v(),y(),_(),S(),x.forEach((function(t){return t()}))}}var Xt=function(){function t(t){this.iframes=new WeakMap,this.mutationCb=t.mutationCb}return t.prototype.addIframe=function(t){this.iframes.set(t,!0)},t.prototype.addLoadListener=function(t){this.loadListener=t},t.prototype.attachIframe=function(t,e){var n;this.mutationCb({adds:[{parentId:t.__sn.id,nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,t)},t}(),Yt=function(){function t(t){this.restorePatches=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror;var e=this;this.restorePatches.push(gt(HTMLElement.prototype,"attachShadow",(function(t){return function(){var n=t.apply(this,arguments);return this.shadowRoot&&e.addShadowRoot(this.shadowRoot,this.ownerDocument),n}})))}return t.prototype.addShadowRoot=function(t,e){Ut(j(j({},this.bypassOptions),{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),Ht(j(j({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))},t.prototype.observeAttachShadow=function(t){if(t.contentWindow){var e=this;this.restorePatches.push(gt(t.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(){var r=n.apply(this,arguments);return this.shadowRoot&&e.addShadowRoot(this.shadowRoot,t.contentDocument),r}})))}},t.prototype.reset=function(){this.restorePatches.forEach((function(t){return t()}))},t}();for(var Kt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<Kt.length;i++)Zt[Kt.charCodeAt(i)]=i;var Qt=new Map;var te=function(t,e,n){if(t&&(re(t,e)||"object"==typeof t)){var r=function(t,e){var n=Qt.get(t);return n||(n=new Map,Qt.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}(n,t.constructor.name),o=r.indexOf(t);return-1===o&&(o=r.length,r.push(t)),o}};function ee(t,e,n){if(t instanceof Array)return t.map((function(t){return ee(t,e,n)}));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){var r=t.constructor.name,o=function(t){var i,e=new Uint8Array(t),n=e.length,r="";for(i=0;i<n;i+=3)r+=Kt[e[i]>>2],r+=Kt[(3&e[i])<<4|e[i+1]>>4],r+=Kt[(15&e[i+1])<<2|e[i+2]>>6],r+=Kt[63&e[i+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(t);return{rr_type:r,base64:o}}return t instanceof DataView?{rr_type:t.constructor.name,args:[ee(t.buffer,e,n),t.byteOffset,t.byteLength]}:t instanceof HTMLImageElement?{rr_type:t.constructor.name,src:t.src}:t instanceof ImageData?{rr_type:t.constructor.name,args:[ee(t.data,e,n),t.width,t.height]}:re(t,e)||"object"==typeof t?{rr_type:t.constructor.name,index:te(t,e,n)}:t}var ne=function(t,e,n){return P([],F(t),!1).map((function(t){return ee(t,e,n)}))},re=function(t,e){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((function(t){return"function"==typeof e[t]}));return Boolean(n.find((function(n){return t instanceof e[n]})))};function ie(t,e,n,r,o,c){var l,d,h=[],f=Object.getOwnPropertyNames(t),m=function(l){try{if("function"!=typeof t[l])return"continue";var d=gt(t,l,(function(d){return function(){for(var h=[],f=0;f<arguments.length;f++)h[f]=arguments[f];var m=d.apply(this,h);if(te(m,c,t),!St(this.canvas,r)){o.getId(this.canvas);var v=ne(P([],F(h),!1),c,t),y={type:e,property:l,args:v};n(this.canvas,y)}return m}}));h.push(d)}catch(r){var f=yt(t,l,{set:function(t){n(this.canvas,{type:e,property:l,args:[t],setter:!0})}});h.push(f)}};try{for(var v=A(f),y=v.next();!y.done;y=v.next()){m(y.value)}}catch(t){l={error:t}}finally{try{y&&!y.done&&(d=v.return)&&d.call(v)}finally{if(l)throw l.error}}return h}var oe,ae,se=function(){function t(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(t,e){!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)},this.mutationCb=t.mutationCb,this.mirror=t.mirror,!0===t.recordCanvas&&this.initCanvasMutationObserver(t.win,t.blockClass)}return t.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},t.prototype.freeze=function(){this.frozen=!0},t.prototype.unfreeze=function(){this.frozen=!1},t.prototype.lock=function(){this.locked=!0},t.prototype.unlock=function(){this.locked=!1},t.prototype.initCanvasMutationObserver=function(t,e){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=function(t,e){var n=[];try{var r=gt(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return St(this,e)||"__context"in this||(this.__context=n),t.apply(this,P([n],F(r),!1))}}));n.push(r)}catch(t){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){n.forEach((function(t){return t()}))}}(t,e),r=function(t,e,n,r){var o,c,l=[],d=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype),h=function(r){try{if("function"!=typeof e.CanvasRenderingContext2D.prototype[r])return"continue";var o=gt(e.CanvasRenderingContext2D.prototype,r,(function(e){return function(){for(var o=this,c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return St(this.canvas,n)||setTimeout((function(){var e=P([],F(c),!1);if("drawImage"===r&&e[0]&&e[0]instanceof HTMLCanvasElement){var canvas=e[0],n=canvas.getContext("2d"),l=null==n?void 0:n.getImageData(0,0,canvas.width,canvas.height),d=null==l?void 0:l.data;e[0]=JSON.stringify(d)}t(o.canvas,{type:pt.a["2D"],property:r,args:e})}),0),e.apply(this,c)}}));l.push(o)}catch(n){var c=yt(e.CanvasRenderingContext2D.prototype,r,{set:function(e){t(this.canvas,{type:pt.a["2D"],property:r,args:[e],setter:!0})}});l.push(c)}};try{for(var f=A(d),m=f.next();!m.done;m=f.next())h(m.value)}catch(t){o={error:t}}finally{try{m&&!m.done&&(c=f.return)&&c.call(f)}finally{if(o)throw o.error}}return function(){l.forEach((function(t){return t()}))}}(this.processMutation.bind(this),t,e,this.mirror),o=function(t,e,n,r){var o=[];return o.push.apply(o,P([],F(ie(e.WebGLRenderingContext.prototype,pt.a.WebGL,t,n,r,e)),!1)),void 0!==e.WebGL2RenderingContext&&o.push.apply(o,P([],F(ie(e.WebGL2RenderingContext.prototype,pt.a.WebGL2,t,n,r,e)),!1)),function(){o.forEach((function(t){return t()}))}}(this.processMutation.bind(this),t,e,this.mirror);this.resetObservers=function(){n(),r(),o()}},t.prototype.startPendingCanvasMutationFlusher=function(){var t=this;requestAnimationFrame((function(){return t.flushPendingCanvasMutations()}))},t.prototype.startRAFTimestamping=function(){var t=this,e=function(n){t.rafStamps.latestId=n,requestAnimationFrame(e)};requestAnimationFrame(e)},t.prototype.flushPendingCanvasMutations=function(){var t=this;this.pendingCanvasMutations.forEach((function(e,canvas){var n=t.mirror.getId(canvas);t.flushPendingCanvasMutationFor(canvas,n)})),requestAnimationFrame((function(){return t.flushPendingCanvasMutations()}))},t.prototype.flushPendingCanvasMutationFor=function(canvas,t){if(!this.frozen&&!this.locked){var e=this.pendingCanvasMutations.get(canvas);if(e&&-1!==t){var n=e.map((function(t){t.type;var e=function(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}(t,["type"]);return e})),r=e[0].type;this.mutationCb({id:t,type:r,commands:n}),this.pendingCanvasMutations.delete(canvas)}}},t}();function ce(t){return j(j({},t),{timestamp:Date.now()})}var ue={map:{},getId:function(t){return t&&t.__sn?t.__sn.id:-1},getNode:function(t){return this.map[t]||null},removeNodeFromMap:function(t){var e=this,n=t.__sn&&t.__sn.id;delete this.map[n],t.childNodes&&t.childNodes.forEach((function(t){return e.removeNodeFromMap(t)}))},has:function(t){return this.map.hasOwnProperty(t)},reset:function(){this.map={}}};function le(t){void 0===t&&(t={});var e=t.emit,n=t.checkoutEveryNms,r=t.checkoutEveryNth,o=t.blockClass,c=void 0===o?"rr-block":o,l=t.blockSelector,d=void 0===l?null:l,h=t.ignoreClass,f=void 0===h?"rr-ignore":h,m=t.maskTextClass,v=void 0===m?"rr-mask":m,y=t.maskTextSelector,_=void 0===y?null:y,S=t.inlineStylesheet,x=void 0===S||S,C=t.maskAllInputs,k=t.maskInputOptions,w=t.slimDOMOptions,I=t.maskInputFn,O=t.maskTextFn,E=t.hooks,T=t.packFn,M=t.sampling,R=void 0===M?{}:M,L=t.mousemoveWait,N=t.recordCanvas,D=void 0!==N&&N,P=t.userTriggeredOnInput,z=void 0!==P&&P,W=t.collectFonts,U=void 0!==W&&W,B=t.inlineImages,H=void 0!==B&&B,$=t.plugins,V=t.keepIframeSrcFn,G=void 0===V?function(){return!1}:V;if(!e)throw new Error("emit function is required");void 0!==L&&void 0===R.mousemove&&(R.mousemove=L);var J,X,Y=!0===C?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==k?k:{password:!0},K=!0===w||"all"===w?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===w,headMetaDescKeywords:"all"===w}:w||{};void 0===J&&(J=window),"NodeList"in J&&!J.NodeList.prototype.forEach&&(J.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in J&&!J.DOMTokenList.prototype.forEach&&(J.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(t){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1});var Z=0;oe=function(t,o){var c;if(!(null===(c=jt[0])||void 0===c?void 0:c.isFrozen())||t.type===pt.b.FullSnapshot||t.type===pt.b.IncrementalSnapshot&&t.data.source===pt.c.Mutation||jt.forEach((function(t){return t.unfreeze()})),e(function(t){var e,n;try{for(var r=A($||[]),o=r.next();!o.done;o=r.next()){var c=o.value;c.eventProcessor&&(t=c.eventProcessor(t))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return T&&(t=T(t)),t}(t),o),t.type===pt.b.FullSnapshot)X=t,Z=0;else if(t.type===pt.b.IncrementalSnapshot){if(t.data.source===pt.c.Mutation&&t.data.isAttachIframe)return;Z++;var l=r&&Z>=r,d=n&&t.timestamp-X.timestamp>n;(l||d)&&ae(!0)}};var Q=function(t){oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.Mutation},t)}))},tt=function(p){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.Scroll},p)}))},et=function(p){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.CanvasMutation},p)}))},nt=new Xt({mutationCb:Q}),it=new se({recordCanvas:D,mutationCb:et,win:window,blockClass:c,mirror:ue}),ot=new Yt({mutationCb:Q,scrollCb:tt,bypassOptions:{blockClass:c,blockSelector:d,maskTextClass:v,maskTextSelector:_,inlineStylesheet:x,maskInputOptions:Y,maskTextFn:O,maskInputFn:I,recordCanvas:D,inlineImages:H,sampling:R,slimDOMOptions:K,iframeManager:nt,canvasManager:it},mirror:ue});ae=function(t){var e,n,r,o;void 0===t&&(t=!1),oe(ce({type:pt.b.Meta,data:{href:window.location.href,width:_t(),height:bt()}}),t),jt.forEach((function(t){return t.lock()}));var l=F(function(t,e){var n=e||{},r=n.blockClass,o=void 0===r?"rr-block":r,c=n.blockSelector,l=void 0===c?null:c,d=n.maskTextClass,h=void 0===d?"rr-mask":d,f=n.maskTextSelector,m=void 0===f?null:f,v=n.inlineStylesheet,y=void 0===v||v,_=n.inlineImages,S=void 0!==_&&_,x=n.recordCanvas,C=void 0!==x&&x,k=n.maskAllInputs,w=void 0!==k&&k,I=n.maskTextFn,O=n.maskInputFn,E=n.slimDOM,T=void 0!==E&&E,M=n.dataURLOptions,R=n.preserveWhiteSpace,L=n.onSerialize,N=n.onIframeLoad,D=n.iframeLoadTimeout,j=n.keepIframeSrcFn,A={};return[ut(t,{doc:t,map:A,blockClass:o,blockSelector:l,maskTextClass:h,maskTextSelector:m,skipChild:!1,inlineStylesheet:y,maskInputOptions:!0===w?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===w?{password:!0}:w,maskTextFn:I,maskInputFn:O,slimDOMOptions:!0===T||"all"===T?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===T,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===T?{}:T,dataURLOptions:M,inlineImages:S,recordCanvas:C,preserveWhiteSpace:R,onSerialize:L,onIframeLoad:N,iframeLoadTimeout:D,keepIframeSrcFn:void 0===j?function(){return!1}:j}),A]}(document,{blockClass:c,blockSelector:d,maskTextClass:v,maskTextSelector:_,inlineStylesheet:x,maskAllInputs:Y,maskTextFn:O,slimDOM:K,recordCanvas:D,inlineImages:H,onSerialize:function(t){wt(t)&&nt.addIframe(t),It(t)&&ot.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(iframe,t){nt.attachIframe(iframe,t),ot.observeAttachShadow(iframe)},keepIframeSrcFn:G}),2),h=l[0],f=l[1];if(!h)return console.warn("Failed to snapshot the document");ue.map=f,oe(ce({type:pt.b.FullSnapshot,data:{node:h,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(o=null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),jt.forEach((function(t){return t.unlock()}))};try{var at=[];at.push(ht("DOMContentLoaded",(function(){oe(ce({type:pt.b.DomContentLoaded,data:{}}))})));var st=function(t){var e;return Jt({mutationCb:Q,mousemoveCb:function(t,source){return oe(ce({type:pt.b.IncrementalSnapshot,data:{source:source,positions:t}}))},mouseInteractionCb:function(t){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.MouseInteraction},t)}))},scrollCb:tt,viewportResizeCb:function(t){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.ViewportResize},t)}))},inputCb:function(t){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.Input},t)}))},mediaInteractionCb:function(p){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.MediaInteraction},p)}))},styleSheetRuleCb:function(t){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.StyleSheetRule},t)}))},styleDeclarationCb:function(t){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.StyleDeclaration},t)}))},canvasMutationCb:et,fontCb:function(p){return oe(ce({type:pt.b.IncrementalSnapshot,data:j({source:pt.c.Font},p)}))},blockClass:c,ignoreClass:f,maskTextClass:v,maskTextSelector:_,maskInputOptions:Y,inlineStylesheet:x,sampling:R,recordCanvas:D,inlineImages:H,userTriggeredOnInput:z,collectFonts:U,doc:t,maskInputFn:I,maskTextFn:O,blockSelector:d,slimDOMOptions:K,mirror:ue,iframeManager:nt,shadowDomManager:ot,canvasManager:it,plugins:(null===(e=null==$?void 0:$.filter((function(p){return p.observer})))||void 0===e?void 0:e.map((function(p){return{observer:p.observer,options:p.options,callback:function(t){return oe(ce({type:pt.b.Plugin,data:{plugin:p.name,payload:t}}))}}})))||[]},E)};nt.addLoadListener((function(t){try{at.push(st(t.contentDocument))}catch(t){console.warn("error in rrweb iframe observer",t)}}));var ct=function(){ae(),at.push(st(document))};return"interactive"===document.readyState||"complete"===document.readyState?ct():at.push(ht("load",(function(){oe(ce({type:pt.b.Load,data:{}})),ct()}),window)),function(){at.forEach((function(t){return t()}))}}catch(t){console.warn(t)}}function de(t){let e,n;try{n=function(t){if(e=t.event,e.target)return t.event.target;var e;return t.event}(t),e=Object(N.c)(n)}catch(t){e="<unknown>"}return 0===e.length?null:Object(D.a)({category:`ui.${t.name}`,message:e,data:{...n?{nodeId:le.mirror.getId(n)}:{}}})}le.addCustomEvent=function(t,e){if(!oe)throw new Error("please add custom event after start recording");oe(ce({type:pt.b.Custom,data:{tag:t,payload:e}}))},le.freezePage=function(){jt.forEach((function(t){return t.freeze()}))},le.takeFullSnapshot=function(t){if(!ae)throw new Error("please take full snapshot after start recording");ae(t)},le.mirror=ue;let pe=null;function he(t,e){return"scope"===t?function(t){const e=t.getLastBreadcrumb();return pe!==e&&e?(pe=e,e.category&&(["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))?null:Object(D.a)(e)):null}(e):de(e)}var fe=n(2577),me=n(3202);var ve=n(3924);function ye(t){return e=>{if(!t.isEnabled())return;const n=function(t){const{from:e,to:n}=t,r=(new Date).getTime()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}(e);null!==n&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate((()=>(Object(fe.a)(t,[n]),!1))))}}function ge(t){return e=>{if(!t.isEnabled())return;const n=function(t){if(t.xhr.__sentry_own_request__)return null;if(t.startTimestamp&&(t.xhr.__sentry_xhr__=t.xhr.__sentry_xhr__||{},t.xhr.__sentry_xhr__.startTimestamp=t.startTimestamp),!t.endTimestamp)return null;const{method:e,url:n,status_code:r}=t.xhr.__sentry_xhr__||{};return void 0===n?null:{type:"resource.xhr",name:n,start:(Object(c.a)([t,"access",t=>t.xhr,"access",t=>t.__sentry_xhr__,"optionalAccess",t=>t.startTimestamp])||0)/1e3||t.endTimestamp/1e3,end:t.endTimestamp/1e3,data:{method:e,statusCode:r}}}(e);null!==n&&(Object(me.a)(t,n.name)||t.addUpdate((()=>(Object(fe.a)(t,[n]),!0))))}}var be=n(3925);var _e=n(3911);const Se={resource:function(t){const{entryType:e,initiatorType:n,name:r,responseEnd:o,startTime:c,encodedBodySize:l,transferSize:d}=t;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${e}.${n}`,start:Ce(c),end:Ce(o),name:r,data:{size:d,encodedBodySize:l}}},paint:function(t){const{duration:e,entryType:n,name:r,startTime:o}=t,c=Ce(o);return{type:n,name:r,start:c,end:c+e}},navigation:function(t){const{entryType:e,name:n,duration:r,domComplete:o,startTime:c,transferSize:l,type:d}=t;if(0===r)return null;return{type:`${e}.${d}`,start:Ce(c),end:Ce(o),name:n,data:{size:l,duration:r}}},"largest-contentful-paint":function(t){const{duration:e,entryType:n,startTime:r,size:o}=t,c=Ce(r);return{type:n,name:n,start:c,end:c+e,data:{duration:e,size:o,nodeId:le.mirror.getId(t.element)}}}};function xe(t){return void 0===Se[t.entryType]?null:Se[t.entryType](t)}function Ce(time){return((_e.a||o.j.performance.timeOrigin)+time)/1e3}var ke=n(3920);class we{constructor(){this._events=[]}destroy(){this._events=[]}get length(){return this._events.length}addEvent(t,e){e?this._events=[t]:this._events.push(t)}finish(){return new Promise((t=>{const e=this._events;this._events=[],t(JSON.stringify(e))}))}}class Ie{__init(){this._eventBufferItemLength=0}__init2(){this._id=0}constructor(t){Ie.prototype.__init.call(this),Ie.prototype.__init2.call(this),this._worker=t}destroy(){Object(c.a)([this,"access",t=>t._worker,"optionalAccess",t=>t.terminate,"call",t=>t()]),this._worker=null}get length(){return this._eventBufferItemLength}async addEvent(t,e){return e&&await this._postMessage({id:this._getAndIncrementId(),method:"init",args:[]}),this._sendEventToWorker(t)}finish(){return this._finishRequest(this._getAndIncrementId())}_postMessage({id:t,method:e,args:n}){return new Promise(((r,o)=>{const l=({data:data})=>{data.method===e&&data.id===t&&(Object(c.a)([this,"access",t=>t._worker,"optionalAccess",t=>t.removeEventListener,"call",t=>t("message",l)]),data.success?r(data.response):o(new Error("Error in compression worker")))};let d;try{d=JSON.stringify(n)}catch(t){d="[]"}Object(c.a)([this,"access",t=>t._worker,"optionalAccess",t=>t.addEventListener,"call",t=>t("message",l)]),Object(c.a)([this,"access",t=>t._worker,"optionalAccess",t=>t.postMessage,"call",n=>n({id:t,method:e,args:d})])}))}_sendEventToWorker(t){const e=this._postMessage({id:this._getAndIncrementId(),method:"addEvent",args:[t]});return this._eventBufferItemLength++,e}async _finishRequest(t){const e=this._postMessage({id:t,method:"finish",args:[]});return this._eventBufferItemLength=0,e}_getAndIncrementId(){return this._id++}}var Oe=n(3921),Ee=n(3952),Te=n(3201),Me=n(3203),Re=n(3926),Le=n(3927),Ne=n(3929),De=n(3928),je=n(3200),Ae=n(3199),Fe=n(3922);class Pe{__init(){this.eventBuffer=null}__init2(){this.performanceEvents=[]}__init3(){this.recordingMode="session"}__init4(){this._performanceObserver=null}__init5(){this._retryCount=0}__init6(){this._retryInterval=5e3}__init7(){this._flushLock=null}__init8(){this._lastActivity=(new Date).getTime()}__init9(){this._isEnabled=!1}__init10(){this._isPaused=!1}__init11(){this._hasInitializedCoreListeners=!1}__init12(){this._stopRecording=null}__init13(){this._context={errorIds:new Set,traceIds:new Set,urls:[],earliestEvent:null,initialTimestamp:(new Date).getTime(),initialUrl:""}}constructor({options:t,recordingOptions:e}){Pe.prototype.__init.call(this),Pe.prototype.__init2.call(this),Pe.prototype.__init3.call(this),Pe.prototype.__init4.call(this),Pe.prototype.__init5.call(this),Pe.prototype.__init6.call(this),Pe.prototype.__init7.call(this),Pe.prototype.__init8.call(this),Pe.prototype.__init9.call(this),Pe.prototype.__init10.call(this),Pe.prototype.__init11.call(this),Pe.prototype.__init12.call(this),Pe.prototype.__init13.call(this),Pe.prototype.__init14.call(this),Pe.prototype.__init15.call(this),Pe.prototype.__init16.call(this),Pe.prototype.__init17.call(this),Pe.prototype.__init18.call(this),Pe.prototype.__init19.call(this),this._recordingOptions=e,this._options=t,this._debouncedFlush=L((()=>this.flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay})}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}start(){this.setInitialState(),this.loadSession({expiry:o.g}),this.session?this.session.sampled&&("error"===this.session.sampled&&(this.recordingMode="error"),this.updateSessionActivity(),this.eventBuffer=function({useCompression:t}){if(t&&window.Worker){const t=new Blob([ke.a]),e=URL.createObjectURL(t);try{const t=new Worker(e);if(t)return new Ie(t);Object(d.c)(new Error("Unable to create compression worker"))}catch(t){}}return new we}({useCompression:Boolean(this._options.useCompression)}),this.addListeners(),this._isEnabled=!0,this.startRecording()):this.handleException(new Error("No session found"))}startRecording(){try{this._stopRecording=le({...this._recordingOptions,..."error"===this.recordingMode&&{checkoutEveryNth:6e4},emit:this.handleRecordingEmit})}catch(t){this.handleException(t)}}stopRecording(){return!!this._stopRecording&&(this._stopRecording(),!0)}stop(){try{this._isEnabled=!1,this.removeListeners(),Object(c.a)([this,"access",t=>t._stopRecording,"optionalCall",t=>t()]),Object(c.a)([this,"access",t=>t.eventBuffer,"optionalAccess",t=>t.destroy,"call",t=>t()]),this.eventBuffer=null}catch(t){this.handleException(t)}}pause(){this._isPaused=!0;try{this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0)}catch(t){this.handleException(t)}}resume(){this._isPaused=!1,this.startRecording()}handleException(t){0}clearSession(){try{Object(Oe.a)(),this.session=void 0}catch(t){this.handleException(t)}}loadSession({expiry:t}){const{type:e,session:n}=Object(Ee.a)({expiry:t,stickySession:Boolean(this._options.stickySession),currentSession:this.session,sessionSampleRate:this._options.sessionSampleRate,errorSampleRate:this._options.errorSampleRate});"new"===e&&this.setInitialState(),n.id!==Object(c.a)([this,"access",t=>t.session,"optionalAccess",t=>t.id])&&(n.previousSessionId=Object(c.a)([this,"access",t=>t.session,"optionalAccess",t=>t.id])),this.session=n}setInitialState(){const t=`${o.j.location.pathname}${o.j.location.hash}${o.j.location.search}`,e=`${o.j.location.origin}${t}`;this.performanceEvents=[],this.clearContext(),this._context.initialUrl=e,this._context.initialTimestamp=(new Date).getTime(),this._context.urls.push(e)}addListeners(){try{if(o.j.document.addEventListener("visibilitychange",this.handleVisibilityChange),o.j.addEventListener("blur",this.handleWindowBlur),o.j.addEventListener("focus",this.handleWindowFocus),Object(Fe.a)(this._context.errorIds),!this._hasInitializedCoreListeners){const e=Object(r.b)().getScope();Object(c.a)([e,"optionalAccess",t=>t.addScopeListener,"call",t=>t(this.handleCoreBreadcrumbListener("scope"))]),Object(h.a)("dom",this.handleCoreBreadcrumbListener("dom")),Object(h.a)("fetch",(t=this,e=>{if(!t.isEnabled())return;const n=function(t){if(!t.endTimestamp)return null;const{startTimestamp:e,endTimestamp:n,fetchData:r,response:o}=t;return{type:"resource.fetch",start:e/1e3,end:n/1e3,name:r.url,data:{method:r.method,statusCode:o.status}}}(e);null!==n&&(Object(me.a)(t,n.name)||t.addUpdate((()=>(Object(fe.a)(t,[n]),!0))))})),Object(h.a)("xhr",ge(this)),Object(h.a)("history",ye(this)),Object(l.b)(function(t){return e=>e.type===o.e?(delete e.breadcrumbs,e):Object(ve.a)(e)&&!Object(c.a)([t,"access",t=>t.getOptions,"call",t=>t(),"access",t=>t._experiments,"optionalAccess",t=>t.captureExceptions])?null:("transaction"===e.type&&"session"!==t.recordingMode||(e.tags={...e.tags,replayId:Object(c.a)([t,"access",t=>t.session,"optionalAccess",t=>t.id])}),"transaction"===e.type&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id?(t.getContext().traceIds.add(e.contexts.trace.trace_id),e):(e.type||t.getContext().errorIds.add(e.event_id),Object(c.a)([e,"access",t=>t.exception,"optionalAccess",t=>t.values,"optionalAccess",t=>t[0]]),"error"===t.recordingMode&&e.exception&&e.message!==o.h&&setTimeout((async()=>{await t.flushImmediate(),t.stopRecording()&&(t.recordingMode="session",t.startRecording())})),e))}(this)),this._hasInitializedCoreListeners=!0}}catch(t){this.handleException(t)}var t;"_performanceObserver"in o.j&&(this._performanceObserver=function(t){const e=new PerformanceObserver((e=>{const n=Object(be.a)(t.performanceEvents,e.getEntries());t.performanceEvents=n}));return["element","event","first-input","largest-contentful-paint","layout-shift","longtask","navigation","paint","resource"].forEach((t=>{try{e.observe({type:t,buffered:!0})}catch(t){}})),e}(this))}removeListeners(){try{o.j.document.removeEventListener("visibilitychange",this.handleVisibilityChange),o.j.removeEventListener("blur",this.handleWindowBlur),o.j.removeEventListener("focus",this.handleWindowFocus),Object(Fe.b)(),this._performanceObserver&&(this._performanceObserver.disconnect(),this._performanceObserver=null)}catch(t){this.handleException(t)}}addUpdate(t){const e=Object(c.a)([t,"optionalCall",t=>t()]);"error"!==this.recordingMode&&!0!==e&&this._debouncedFlush()}__init14(){this.handleRecordingEmit=(t,e)=>{this.checkAndHandleExpiredSession()&&this.addUpdate((()=>("error"===this.recordingMode&&2===t.type&&this.setInitialState(),Object(Me.a)(this,t,e),2===t.type&&(Object(c.a)([this,"access",t=>t.session,"optionalAccess",t=>t.previousSessionId])||("error"===this.recordingMode&&this.session&&this._context.earliestEvent&&(this.session.started=this._context.earliestEvent,this._maybeSaveSession()),"session"===this.recordingMode&&this.flushImmediate()),!0))))}}__init15(){this.handleVisibilityChange=()=>{"visible"===o.j.document.visibilityState?this.doChangeToForegroundTasks():this.doChangeToBackgroundTasks()}}__init16(){this.handleWindowBlur=()=>{const t=Object(D.a)({category:"ui.blur"});this.doChangeToBackgroundTasks(t)}}__init17(){this.handleWindowFocus=()=>{const t=Object(D.a)({category:"ui.focus"});this.doChangeToForegroundTasks(t)}}__init18(){this.handleCoreBreadcrumbListener=t=>e=>{if(!this._isEnabled)return;const n=he(t,e);null!==n&&"sentry.transaction"!==n.category&&("ui.click"===n.category?this.triggerUserActivity():this.checkAndHandleExpiredSession(),this.addUpdate((()=>(Object(Me.a)(this,{type:pt.b.Custom,timestamp:1e3*(n.timestamp||0),data:{tag:"breadcrumb",payload:n}}),"console"===n.category))))}}doChangeToBackgroundTasks(t){if(!this.session)return;const e=Object(Ae.a)(this.session,o.i);t&&!e&&this.createCustomBreadcrumb(t),this.conditionalFlush()}doChangeToForegroundTasks(t){if(!this.session)return;this.checkAndHandleExpiredSession({expiry:o.i})&&t&&this.createCustomBreadcrumb(t)}triggerFullSnapshot(){le.takeFullSnapshot(!0)}updateUserActivity(t=(new Date).getTime()){this._lastActivity=t}updateSessionActivity(t=(new Date).getTime()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}triggerUserActivity(){if(this.updateUserActivity(),!this._stopRecording)return this.loadSession({expiry:o.g}),void this.resume();this.checkAndHandleExpiredSession(),this.updateSessionActivity()}createCustomBreadcrumb(t){this.addUpdate((()=>{Object(Me.a)(this,{type:pt.b.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})}))}addPerformanceEntries(){const t=[...this.performanceEvents];this.performanceEvents=[],Object(fe.a)(this,function(t){return t.map(xe).filter(Boolean)}(t))}checkAndHandleExpiredSession({expiry:t=o.g}={}){const e=Object(c.a)([this,"access",t=>t.session,"optionalAccess",t=>t.id]);if(this._lastActivity&&Object(je.a)(this._lastActivity,o.d))return void this.pause();this.loadSession({expiry:t});return e===Object(c.a)([this,"access",t=>t.session,"optionalAccess",t=>t.id])||(this.triggerFullSnapshot(),!1)}conditionalFlush(){"error"!==this.recordingMode&&this.flushImmediate()}clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[],this._context.earliestEvent=null}popEventContext(){this._context.earliestEvent&&this._context.earliestEvent<this._context.initialTimestamp&&(this._context.initialTimestamp=this._context.earliestEvent);const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds).filter(Boolean),traceIds:Array.from(this._context.traceIds).filter(Boolean),urls:this._context.urls};return this.clearContext(),t}async runFlush(){if(this.session&&(await this.addPerformanceEntries(),Object(c.a)([this,"access",t=>t.eventBuffer,"optionalAccess",t=>t.length]))){await Object(Re.a)(this);try{const t=await this.eventBuffer.finish(),e=this.session.id,n=this.popEventContext(),r=this.session.segmentId++;this._maybeSaveSession(),await this.sendReplay({replayId:e,events:t,segmentId:r,includeReplayStartTimestamp:0===r,eventContext:n})}catch(t){this.handleException(t)}}}__init19(){this.flush=async()=>{if(this._isEnabled&&this.checkAndHandleExpiredSession()&&Object(c.a)([this,"access",t=>t.session,"optionalAccess",t=>t.id])){if(Object(c.a)([this,"access",t=>t._debouncedFlush,"optionalAccess",t=>t.cancel,"call",t=>t()]),!this._flushLock)return this._flushLock=this.runFlush(),await this._flushLock,void(this._flushLock=null);try{await this._flushLock}catch(t){}finally{this._debouncedFlush()}}}}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}async sendReplayRequest({events:t,replayId:e,segmentId:n,includeReplayStartTimestamp:l,eventContext:d}){const h=Object(Le.a)({events:t,headers:{segment_id:n}}),{urls:f,errorIds:m,traceIds:v,initialTimestamp:y}=d,_=(new Date).getTime(),S=Object(r.b)(),x=S.getClient(),C=S.getScope(),k=x&&x.getTransport(),w=Object(c.a)([x,"optionalAccess",t=>t.getDsn,"call",t=>t()]);if(!(x&&C&&k&&w))return;const I={type:o.e,...l?{replay_start_timestamp:y/1e3}:{},timestamp:_/1e3,error_ids:m,trace_ids:v,urls:f,replay_id:e,segment_id:n},O=await Object(De.a)({scope:C,client:x,replayId:e,event:I});if(!O)return;O.tags={...O.tags,sessionSampleRate:this._options.sessionSampleRate,errorSampleRate:this._options.errorSampleRate,replayType:Object(c.a)([this,"access",t=>t.session,"optionalAccess",t=>t.sampled])};const E=Object(Ne.a)(O,h,w,x.getOptions().tunnel);try{return k.send(E)}catch(t){throw new Error(o.h)}}resetRetries(){this._retryCount=0,this._retryInterval=5e3}async sendReplay({replayId:t,events:e,segmentId:n,includeReplayStartTimestamp:r,eventContext:c}){if(e.length)try{return await this.sendReplayRequest({events:e,replayId:t,segmentId:n,includeReplayStartTimestamp:r,eventContext:c}),this.resetRetries(),!0}catch(l){if(Object(d.f)("Replays",{_retryCount:this._retryCount}),this.handleException(l),this._retryCount>=3)throw new Error(`${o.h} - max retries exceeded`);return this._retryCount=this._retryCount+1,this._retryInterval=this._retryCount*this._retryInterval,await new Promise(((o,l)=>{setTimeout((async()=>{try{await this.sendReplay({replayId:t,events:e,segmentId:n,includeReplayStartTimestamp:r,eventContext:c}),o(!0)}catch(t){l(t)}}),this._retryInterval)}))}}_maybeSaveSession(){this.session&&this._options.stickySession&&Object(Te.a)(this.session)}}var ze=n(3918);const We="img,image,svg,path,rect,area,video,object,picture,embed,map,audio";let Ue=!1;class Be{static __initStatic(){this.id="Replay"}__init(){this.name=Be.id}get _isInitialized(){return Ue}set _isInitialized(t){Ue=t}constructor({flushMinDelay:t=5e3,flushMaxDelay:e=15e3,initialFlushDelay:n=5e3,stickySession:r=!0,useCompression:c=!0,sessionSampleRate:l,errorSampleRate:d,maskAllText:h=!0,maskAllInputs:f=!0,blockAllMedia:m=!0,_experiments:v={},blockClass:y="sentry-block",ignoreClass:_="sentry-ignore",maskTextClass:S="sentry-mask",blockSelector:x="[data-sentry-block]",...C}={}){if(Be.prototype.__init.call(this),this.recordingOptions={maskAllInputs:f,blockClass:y,ignoreClass:_,maskTextClass:S,blockSelector:x,...C},this.options={flushMinDelay:t,flushMaxDelay:e,stickySession:r,initialFlushDelay:n,sessionSampleRate:o.b,errorSampleRate:o.a,useCompression:c,maskAllText:h,blockAllMedia:m,_experiments:v},"number"==typeof l&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${l} })`),this.options.sessionSampleRate=l),"number"==typeof d&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${d} })`),this.options.errorSampleRate=d),this.options.maskAllText&&(this.recordingOptions.maskTextSelector=o.c),this.options.blockAllMedia&&(this.recordingOptions.blockSelector=this.recordingOptions.blockSelector?`${this.recordingOptions.blockSelector},${We}`:We),Object(ze.a)()&&this._isInitialized)throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}setupOnce(){Object(ze.a)()&&(this._setup(),setTimeout((()=>this.start())))}start(){this._replay&&this._replay.start()}stop(){this._replay&&this._replay.stop()}_setup(){this._loadReplayOptionsFromClient(),this._replay=new Pe({options:this.options,recordingOptions:this.recordingOptions})}_loadReplayOptionsFromClient(){const t=Object(r.b)().getClient(),e=t&&t.getOptions();e&&"number"==typeof e.replaysSessionSampleRate&&(this.options.sessionSampleRate=e.replaysSessionSampleRate),e&&"number"==typeof e.replaysOnErrorSampleRate&&(this.options.errorSampleRate=e.replaysOnErrorSampleRate)}}Be.__initStatic()}}]);